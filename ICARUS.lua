local SCRIPT_FILE_NAME = GetScriptName();
local SCRIPT_FILE_ADDR = "https://raw.githubusercontent.com/vpumav/ICARUS/master/ICARUS.lua";
local VERSION_FILE_ADDR = "https://raw.githubusercontent.com/vpumav/ICARUS/master/version.txt";
local VERSION_NUMBER = "1.0.8"; --- This too
local version_check_done = false;
local update_downloaded = false;
local update_available = false;

--- Auto Updater GUI Stuff
local ICARUS_UPDATER_TAB = gui.Tab(gui.Reference("Settings"), "icarus.updater.tab", "ICARUS™ Autoupdater")
local ICARUS_UPDATER_GROUP = gui.Groupbox(ICARUS_UPDATER_TAB, "Auto Updater for ICARUS™ | v" .. VERSION_NUMBER, 15, 15, 600, 600)
local ICARUS_UPDATER_TEXT = gui.Text(ICARUS_UPDATER_GROUP, "")
--- AUTO UPDATER END



local a=false;setFont=draw.SetFont;createFont=draw.CreateFont;getScreenSize=draw.GetScreenSize;getLocal=entities.GetLocalPlayer;color=draw.Color;text=draw.TextShadow;SetVal=gui.SetValue;GetVal=gui.GetValue;local b=createFont("Verdana",30,1500)local c=createFont("Arial",30,1500)local d=createFont("Segoe UI",30,1500)local e=createFont("Segoe UI",20,1500)local f=http.Get("https://i.ibb.co/2YKz5C7/Icarus-FERTIG.png")local g,h,i=common.DecodePNG(f)local j=draw.CreateTexture(g,h,i)local k=gui.Reference(ALEGIT)local l=gui.Groupbox(k,"Advanced Legit Bot",15,5,297,300)local m=gui.Groupbox(k,"Extra's",320,550,297,300)local n=gui.Groupbox(k,"Visual stuff",320,5,297,300)local o=gui.Checkbox(l,"lbot.sonar.enabled","Enable",false)local p=gui.Slider(l,"lbot.sonar.volume","Volume",50,1,100,1)local q=gui.Combobox(l,"lbot.sonar.enabled","Sound","Button 17","Button 15","Blip 1","Blip 2","Bell","Button 10")local r=gui.Slider(l,"lbot.sonar.distance","Distance",200,100,1500,10)local s=gui.Slider(l,"lbot.sonar.fov","FOV",180,1,180,1)local t=gui.Slider(l,"lbot.sonar.fov","FOV rotation",180,0,360,1)local u=gui.Checkbox(l,"lbot.sonar.distancebasedfreq","Distancebased Beep frequency",false)local v=gui.Checkbox(l,"lbot.sonar.distancebasedvol","Distancebased Beep frequency",false)local w=gui.Checkbox(l,"lbot.sonar.visualize","Visualize FOV",false)local x=gui.Groupbox(k,"Grenade Helper",15,600,297,300)local y=gui.Groupbox(k,"Semirage (WARNING: Ragebots Gets Enabled)",320,990,297,300)local z=gui.Checkbox(y,"semirage.aimbot","SEMI-AIM",false)local A=gui.Slider(y,"semirage.fovrndmtimer","Dynamic FOV Switch Time",1,1,60)local B=gui.Slider(y,"semirage.fovrndm1","Dynamic Minimum FOV",1,1,30)local C=gui.Slider(y,"semirage.fovrndm2","Dynamic Maximum FOV",1,1,30)local D=gui.Keybox(y,"semirage.autowall","Autowall key",72)local E=gui.Keybox(y,"semirage.obvious","Obvious Mode on Key",72)local F=gui.Keybox(y,"semirage.resolver","Toggle Resolver on key",72)local G=gui.Combobox(y,"semirage.legitAA.mode","Legit AA Modes","Off","Safe","Maximum","Randomized","Jitter","Anti-Brute")local H=gui.Slider(y,"semirage.legitAA.AntiBrute","Anti Brute Tick time",1,1,80)local I=gui.Slider(y,"semirage.legitAA.rndm1","rotation randomizer 1",1,1,58)local J=gui.Slider(y,"semirage.legitAA.rndm2","rotation randomizer 2",1,1,58)local K=gui.Slider(y,"semirage.legitAA.rndm3","lby randomizer 1",1,-58,1)local L=gui.Slider(y,"semirage.legitAA.rndm4","lby randomizer 2",1,-58,1)local M=gui.Keybox(y,"semirage.aa.inverter.key","Base Rotation Inverter",72)local N=gui.Checkbox(y,"semirage.fakelag","Fake LAG",false)local O=gui.Checkbox(y,"semirage.extra.desyncindicator","Desync Indicator",false)local P=gui.ColorPicker(y,"semirage.extra.desynccolor","Desync Indicator Color",255,255,255,255)local Q=gui.Checkbox(y,"semirage.extra.fovindicator","FOV  Indicator",false)local R=gui.ColorPicker(y,"semirage.extra.fovccator Color",255,255,255,255)local S=gui.Combobox(m,"icarus.showlogo","Icarus LOGO's","Simple","Normal")local T=gui.Checkbox(m,"icarus.pingindicator","Indicate the ping",false)local U=gui.Checkbox(m,"icarus.backtracklines","Backtrack lines",false)local V=gui.Checkbox(x,"gh_enabled","Grenade Helper Enabled",false)local W=gui.Slider(x,"gh_rect_size","Throw Rect Size",10,0,25)local X=gui.Checkbox(x,"gh_ch_throw","Throw Rectangle Enabled",1)local Y=gui.Checkbox(x,"gh_ch_throwline","Throw Helper Line Enabled",1)local Z=gui.Checkbox(x,"gh_ch_standbox","Stand Box Enabled",1)local _=gui.Checkbox(x,"gh_ch_standbox_ood","Stand Box Out of Distance Custom Color",1)local a0=gui.Checkbox(x,"gh_ch_text","Text Enabled (Name)",1)local a1=gui.Slider(x,"gh_max_distance","Max Distance",3000,0,5000)local a2=gui.Checkbox(x,"gh_fix_strafe","Affect Autostrafe",1)local a3=gui.Checkbox(x,"gh_fix_airstrafe","Affect Airstrafe",1)local a4=gui.Slider(x,"gh_box_radius","GH Box Size",20,0,50)local a5=gui.Checkbox(x,"gh_ch_keybinds","Enable Keybinds",0)local a6=gui.Keybox(x,"gh_kb_add","Add Throw",0)local a7=gui.Keybox(x,"gh_kb_rem","Remove Throw",0)local a8=gui.ColorPicker(X,"gh_clr_throw","Grenade Helper Throw Point",255,0,0,255)local a9=gui.ColorPicker(Y,"gh_clr_helper","Grenade Helper Line Color",233,212,96,255)local aa=gui.ColorPicker(Z,"gh_clr_standbox","Grenade Helper Location",0,230,64,255)local ab=gui.ColorPicker(_,"gh_clr_standbox_oop","Grenade Helper Location (Out)",22,160,133,255)local ac=gui.ColorPicker(a0,"gh_clr_text","Grenade Helper Text Color",255,255,255,255)local ad=gui.Checkbox(m,"icarus.quickpeek","Enable Quickpeek",false)local ae=gui.Keybox(m,"icarus.quickpeek.key","Key for Quickpeek",72)local af=gui.Checkbox(n,"icarus.quickpeek.visualize","Visualize Quickpeek",false)local ag=gui.ColorPicker(n,"icarus.quickpeek.visualize.clr1","Quickpeek Outline Color",255,255,255,255)local ah=gui.ColorPicker(n,"icarus.quickpeek.visualice.clr2","Quickpeek Fill Color",255,255,255,255)local function ai()minValue=B:GetValue()maxValue=C:GetValue()legitaarandom1=I:GetValue()legitaarandom2=J:GetValue()legitaarandomlby1=K:GetValue()legitaarandomlby2=L:GetValue()rotationRANDOMIZED=math.random(legitaarandom1,legitaarandom2)lbyRANDOMIZED=math.random(legitaarandomlby1,legitaarandomlby2)ping=entities.GetPlayerResources():GetPropInt("m_iPing",client.GetLocalPlayerIndex())end;rotation=58;rotation2=56;rotation3=56;lby2=-60;lby=-60;key=1;SilntAIM=1;o:SetDescription("Enables Sonar ESP.")q:SetDescription("Select which sound should be played.")p:SetDescription("Master volume of the sound.")r:SetDescription("Distance of the FOV.")s:SetDescription("Field of view of the sonar.")t:SetDescription("Rotation of the FOV.")u:SetDescription("Play sound more frequently when enemies are near.")v:SetDescription("Play sound louder when enemies are near.")w:SetDescription("Visualize the FOV.")local aj=0;local ak={"button17","button15","blip1","blip2","bell1","button10"}local al=math.rad;local am=math.cos;local an=math.sin;local ao=math.sqrt;local ap=math.atan;local aq=client.WorldToScreen;local ar=draw.Line;local as=gui.Checkbox(n,"crosshair.recoilcrosshair","Recoil Crosshair",1)local at=gui.ColorPicker(as,"recoilcolor","Recoil Crosshair Color",255,255,255,255)local au=gui.Checkbox(n,"crosshair.recoilidle","Hide Recoil Crosshair When Idle",1)at:SetDescription("Pick the Color of the recoil Crosshair")as:SetDescription("Enables the recoil Crosshair")au:SetDescription("Disables the recoil Crosshair if it's Idling")local av=gui.Slider(m,"icarus.bhophitchance","Bhop hitchance",1,1,100)callbacks.Register("CreateMove",function(aw)if gui.GetValue("misc.autojump")~='"Off"'or bit.band(aw.buttons,2)==0 or bit.band(entities.GetLocalPlayer():GetPropInt("m_fFlags"),1)==0 or math.random(1,100)>=av:GetValue()then return end;aw.buttons=aw.buttons-2 end)local ax=client.GetPlayerIndexByUserID;local ay=client.GetLocalPlayerIndex;local az;local aA;local aB=gui.Checkbox(m,'lua.quick.switch','Quick Switch AWP',0)local function aC(aD)if aB:GetValue()then if aD:GetName()~='weapon_fire'then return end;if gui.GetValue("misc.fakelatency.enable")then return end;local aE=ay()local aF=aD:GetInt('userid')if aE==ax(aF)then local aG=aD:GetString('weapon')if aG=='weapon_awp'then client.Command('slot3',true)flip=true end end end end;client.AllowListener('weapon_fire')callbacks.Register('FireGameEvent','on_weapon_fire',aC)local function aH(aD)if aD:GetName()~='item_equip'then return end;local aE=ay()local aF=aD:GetInt('userid')local aI=aD:GetString('item')if aE==ax(aF)then aA=aI end end;client.AllowListener('item_equip')callbacks.Register('FireGameEvent','on_item_equip',aH)function reset_tick(aJ)if flip then if aA~='awp'then client.Command("slot1",true)flip=false end end end;callbacks.Register('CreateMove','reset_tick',reset_tick)local function aK()local aL=0;local aM=entities.GetLocalPlayer()if aM~=nil and not gui.GetValue("rbot.master")then if aM:IsAlive()then local aN=aM:GetProp("m_bIsScoped")if aN==256 then aN=0 end;if aN==257 then aN=1 end;local aO=aM:GetPropEntity("m_hActiveWeapon")if aO~=nil then local aP=aO:GetClass()local aQ=0;local aR=0;aP=string.gsub(aP,"CWeapon","")if aP=="Aug"or aP=="SG556"then aL=1 else aL=0 end;if aN==0 or aN==1 and aL==1 then aQ=1 else aQ=0 end;if aP=="Taser"or aP=="CKnife"then aQ=0 end;if aP=="AWP"or aP=="SCAR20"or aP=="G3SG1"or aP=="SSG08"then aR=1 end;if as:GetValue()and aQ==1 then local aS=aM:GetPropVector("localdata","m_Local","m_aimPunchAngle")local aT,aU=aS.x,aS.y;local aV,aW=draw.GetScreenSize()local aX=aV/2;local aY=aW/2;local aZ=90;if aZ==0 then aZ=90 end;if aN==1 and aL==1 then aZ=45 end;local a_=aV/aZ;local b0=aW/aZ;local b1=0;local b2=0;if gui.GetValue("esp.other.norecoil")then b1=aX-a_*aU*1.2;b2=aY+b0*aT*2 else b1=aX-a_*aU*0.6;b2=aY+b0*aT end;if b1>aX-0.5 and b1<aX then b1=aX end;if b1<aX+0.5 and b1>aX then b1=aX end;if b2>aY-0.5 and b2<aY then b2=aY end;if b2<aY+0.5 and b2>aY then b2=aY end;if au:GetValue()then if b1==aX and b2==aY and aR~=1 then return end end;draw.Color(at:GetValue())draw.FilledRect(b1-3,b2-1,b1+3,b2+1)draw.FilledRect(b1-1,b2-3,b1+1,b2+3)end end end end end;callbacks.Register("Draw","punch",aK)local b3={}local b4=gui.Checkbox(m,"aspect_ratio_check","Aspect Ratio Changer",false)local b5=gui.Slider(m,"aspect_ratio_reference","Force aspect ratio",100,1,199)local function b6(b7,b8)while b7~=0 do b7,b8=math.fmod(b8,b7),b7 end;return b8 end;local function b9(ba)local bb,bc=draw.GetScreenSize()local bd=bb*ba/bc;if ba==1 or not b4:GetValue()then bd=0 end;client.SetConVar("r_aspectratio",tonumber(bd),true)end;local function be()local bb,bc=draw.GetScreenSize()for bf=1,200 do local bg=bf*0.01;bg=2-bg;local bh=b6(bb*bg,bc)if bb*bg/bh<100 or bg==1 then b3[bf]=bb*bg/bh..":"..bc/bh end end;local bi=b5:GetValue()*0.01;bi=2-bi;b9(bi)end;callbacks.Register('Draw',"Aspect Ratio",be)local bj=client.GetConVar("fov_cs_debug")local bk=client.GetConVar("viewmodel_fov")local bl=gui.Slider(n,"view_fov","View",bj,0,120)local bm=gui.Slider(n,"view_model_fov","Viewmodel",bk,0,120)local bn=gui.Slider(n,"view_model_offset_x","Viewmodel X Offset",0,-10,10,0.1)local bo=gui.Slider(n,"view_model_offset_y","Viewmodel Y Offset",0,-10,10,0.1)local bp=gui.Slider(n,"view_model_offset_z","Viewmodel Z Offset",0,-10,10,0.1)local function bq()if bl:GetValue()and bm:GetValue()and bn:GetValue()and bo:GetValue()and bp:GetValue()then client.SetConVar("fov_cs_debug",bl:GetValue(),true)client.SetConVar("viewmodel_fov",bm:GetValue(),true)client.SetConVar("viewmodel_offset_x",bn:GetValue(),true)client.SetConVar("viewmodel_offset_y",bo:GetValue(),true)client.SetConVar("viewmodel_offset_z",bp:GetValue(),true)end end;callbacks.Register("Draw","Field of View",bq)local br=gui.Checkbox(n,"crosshair.onsniper","Crosshair on Sniper",false)local function bs()if br:GetValue()then local bt=1;local bu=entities.GetLocalPlayer()if bu==nil then return end;if bt==0 or bt==1 and bu:GetProp("m_bIsScoped")%1==0 or bt==2 and gui.GetValue("vis_scoperemover")==1 or bt==2 and gui.GetValue("vis_scoperemover")~=1 and bu:GetProp("m_bIsScoped")%2==0 then if client.GetConVar("weapon_debug_spread_show")~=3 then client.SetConVar("weapon_debug_spread_show",3,true)end else if client.GetConVar("weapon_debug_spread_show")~=0 then client.SetConVar("weapon_debug_spread_show",0,true)end end end end;callbacks.Register("Draw","force_crosshair_draw",bs)local function bv(vector,bw,color)local bx,by;draw.Color(color[1],color[2],color[3],color[4])local aZ=s:GetValue()local bz=180-t:GetValue()local bA=engine.GetViewAngles()bA.y=bA.y+bz+180-aZ;bA:Normalize()for rotation=bA.y,bA.y+aZ*2,1 do local bB=al(rotation)local bC=Vector3(bw*am(bB)+vector.x,bw*an(bB)+vector.y,vector.z)local aX,aY=aq(bC)if aZ~=180 then if rotation==bA.y or rotation==bA.y+aZ*2 then local bD,bE=aq(vector)if aX~=nil and bD~=nil then ar(aX,aY,bD,bE)for bf=0,4 do ar(aX,aY+bf,bD,bE+bf)end end end end;if aX~=nil and bx~=nil then ar(aX,aY,bx,by)for bf=0,4 do ar(aX,aY+bf,bx,by+bf)end end;bx,by=aX,aY end end;local function bF(bG)return ao(bG.x*bG.x+bG.y*bG.y+bG.z*bG.z)end;local function bH(bI,bJ)return Vector3(bI.x-bJ.x,bI.y-bJ.y,bI.z-bJ.z)end;local function bK(bL,bM)local bN=EulerAngles(0,0,0)local bO=bH(bL,bM)local bP=bF(bO)bN.x=ap(bO.z/bP)*180.0/3.14159265358979323846;bN.y=ap(bO.y/bO.x)*180.0/3.14159265358979323846;bN.z=0.0;if bO.x>=0.0 then bN.y=bN.y+180.0 end;bN:Normalize()return bN end;local function bQ()local bR=entities.GetLocalPlayer()if bR and bR:IsAlive()and o:GetValue()then local bS=bR:GetAbsOrigin()local bT=0;local bU=0;local bV=1;local bW=9999;local aZ=s:GetValue()local bz=t:GetValue()local bA=engine.GetViewAngles()local bX=r:GetValue()for bf=1,64,1 do local bY=entities.GetByIndex(bf)if bY and bY:IsAlive()then if bY:GetTeamNumber()~=bR:GetTeamNumber()then bU=bU+1;local bZ=bY:GetAbsOrigin()local b_=bK(bS,bZ)local c0=ao((bS.x-bZ.x)^2+(bS.y-bZ.y)^2)if c0<=bX then b_.y=b_.y-bA.y+bz;b_:Normalize()if b_.y<0 then if b_.y>=aZ*-1 then bT=bT+1 end elseif b_.y>0 then if b_.y<=aZ then bT=bT+1 end end;if c0<bW then bW=c0 end end end end end;if u:GetValue()then bV=0.1+0.8*bW/1500 end;if bT>0 and aj<globals.RealTime()-bV then local c1=ak[q:GetValue()+1]local c2=p:GetValue()/100;if v:GetValue()then c2=(1-bW/1500)*c2 end;client.Command("playvol buttons/"..c1 .." "..c2,true)aj=globals.RealTime()end;if w:GetValue()then bv(bS,bX,{255*bT/bU,25,25,155})end end end;callbacks.Register("Draw",bQ)local c3=100;local c4=100;local c5=30;local c6=40;local c7="grenade_helper_data.dat"local c8={}local c9=false;local ca=false;local cb=true;local cc=true;local cd=globals.TickCount()local ce;local cf=1;local cg;local ch=globals.TickCount()local ci,cj=0,0;local cc=true;local ck={"auto","smokegrenade","flashbang","hegrenade","molotovgrenade","decoy"}local cl={"stand","jump","run","crouch","right","leftright","jumpcrouch","jumpleftright","jumpright","runjump"}local cm={"[GH] Welcome to GH Setup. Type 'cancel' at any time to cancel. Please enter the name of the throw (e.g. CT to B site):","[GH] Please enter the throw type (stand / jump / run / crouch / right / leftright / jumpcrouch / runjump / jumpleftright / jumpright):"}local cn=file.Open(c7,"a")cn:Close()local co;function gameEventHandler(cp)if V:GetValue()==false then return end;local cq=cp:GetName()if cq=="player_say"and ce~=nil then local cr=client.GetLocalPlayerIndex()print(cr)local cs=cp:GetInt('userid')local ct=client.GetPlayerIndexByUserID(cs)print(ct)if cr~=ct then return end;ch=globals.TickCount()local cu=cp:GetString('text')if cu=="cancel"then cg="[GH] Throw cancelled"ce=nil;cf=0;return end;if string.sub(cu,1,4)=="[GH]"then return end;if cf==1 then ce.name=cu elseif cf==2 then if hasValue(cl,cu)==false then cg="[GH] The throw type '"..cu.."' is invalid, please enter one of the following values: stand / jump / run / crouch / right"return end;ce.type=cu;cg="[GH] Your throw '"..ce.name.."' - "..ce.type.." has been added."table.insert(c8[co],ce)ce=nil;local cv=convertTableToDataString(c8)local cw=file.Open(c7,"w")if cw~=nil then cw:Write(cv)cw:Close()end;cf=0;return else cf=0;return end;cf=cf+1;cg=cm[cf]return end end;function doAdd(aw)local aM=entities.GetLocalPlayer()if co==nil or c8[co]==nil or aM==nil or not aM:IsAlive()then return end;local cx=aM:GetAbsOrigin()local bN=aw:GetViewAngles()local cy=getWeaponName(aM)if cy~=nil and cy~="smokegrenade"and cy~="flashbang"and cy~="molotovgrenade"and cy~="hegrenade"and cy~="decoy"then return end;local cz={name="",type="not_set",nade=cy,pos={x=cx.x,y=cx.y,z=cx.z},ax=bN.x,ay=bN.y}ce=cz;cf=1;cg=cm[cf]end;function removeFirstThrow(cA)for bf,cB in ipairs(c8[co])do if cB.name==cA.name and cB.pos.x==cA.pos.x and cB.pos.y==cA.pos.y and cB.pos.z==cA.pos.z then return table.remove(c8[co],bf)end end end;function doDel(cA)if co==nil or c8[co]==nil then return end;removeFirstThrow(cA)local cv=convertTableToDataString(c8)local cw=file.Open(c7,"w")if cw~=nil then cw:Write(cv)cw:Close()end end;function moveEventHandler(aw)if V:GetValue()==false then return end;local aM=entities.GetLocalPlayer()if co==nil or c8==nil or c8[co]==nil or aM==nil or not aM:IsAlive()then ce=nil;cf=1;cg=nil;return end;if ce~=nil then return end;local cC=a6:GetValue()local cD=a7:GetValue()if a5:GetValue()==false or cC==0 and cD==0 then return end;if cd~=nil and cd>globals.TickCount()then cd=globals.TickCount()end;if cC~=0 and input.IsButtonDown(cC)and globals.TickCount()-cd>c5 then cd=globals.TickCount()return doAdd(aw)end;local cE,cF=getClosestThrow(c8[co],aM,aw)if cE==nil or cF>a4:GetValue()then return end;if cD~=0 and input.IsButtonDown(cD)and globals.TickCount()-cd>c5 then cd=globals.TickCount()return doDel(cE)end end;function drawEventHandler()if V:GetValue()==false then return end;if cc then loadData()cc=false end;ci,cj=draw.GetScreenSize()local cG=engine.GetMapName()if cG==nil or c8==nil then return end;if c8[cG]==nil then c8[cG]={}end;if co~=cG then co=cG end;if c8[co]==nil then return end;if ch~=nil and ch>globals.TickCount()then ch=globals.TickCount()end;if cg~=nil and globals.TickCount()-ch>100 then client.ChatTeamSay(cg)cg=nil end;showNadeThrows()end;function loadData()local cw=file.Open(c7,"r")if cw==nil then return end;local cH=cw:Read()cw:Close()if cH~=nil and cH~=""then c8=parseStringifiedTable(cH)end end;function showNadeThrows()local aM=entities:GetLocalPlayer()if aM==nil then return end;local cx=aM:GetAbsOrigin()local aP=getWeaponName(aM)if aP~=nil and aP~="smokegrenade"and aP~="flashbang"and aP~="molotovgrenade"and aP~="hegrenade"and aP~="decoy"then if a2:GetValue()then gui.SetValue("misc.strafe.enable",1)end;if a3:GetValue()then gui.SetValue("misc.strafe.air",1)end;return end;local cI,cJ=getActiveThrows(c8[co],aM,aP)if a2:GetValue()then gui.SetValue("misc.strafe.enable",1)end;if a3:GetValue()then gui.SetValue("misc.strafe.air",1)end;for bf=1,#cI do local cA=cI[bf]local cK=Vector3(cA.pos.x,cA.pos.y,cA.pos.z)local cL,cM=client.WorldToScreen(cK)if cJ then if a2:GetValue()then gui.SetValue("misc.strafe.enable",0)end;if a3:GetValue()then gui.SetValue("misc.strafe.air",0)end;local cN=64;if cA.type=="crouch"then cN=46 end;local cO,cP,cQ=getThrowPosition(cA.pos.x,cA.pos.y,cA.pos.z,cA.ax,cA.ay,cN)local cR=Vector3(cO,cP,cQ)local cS,cT=client.WorldToScreen(cR)if cS~=nil and cT~=nil then if X:GetValue()then draw.Color(a8:GetValue())local cU=W:GetValue()draw.RoundedRect(cS-cU,cT-cU,cS+cU,cT+cU)end;if Y:GetValue()then draw.Color(a9:GetValue())draw.Line(cS,cT,ci/2,cj/2)end;if a0:GetValue()then draw.Color(ac:GetValue())local cV,cW=draw.GetTextSize(cA.name)draw.Text(cS-cV/2,cT-30-cW/2,cA.name)cV,cW=draw.GetTextSize(cA.type)draw.Text(cS-cV/2,cT-20-cW/2,cA.type)end end end;local cX=Vector3(cA.pos.x-a4:GetValue()/2,cA.pos.y-a4:GetValue()/2,cA.pos.z)local cY,cZ=client.WorldToScreen(cX)local c_=Vector3(cA.pos.x-a4:GetValue()/2,cA.pos.y+a4:GetValue()/2,cA.pos.z)local d0,d1=client.WorldToScreen(c_)local d2=Vector3(cA.pos.x+a4:GetValue()/2,cA.pos.y-a4:GetValue()/2,cA.pos.z)local d3,d4=client.WorldToScreen(d2)local d5=Vector3(cA.pos.x+a4:GetValue()/2,cA.pos.y+a4:GetValue()/2,cA.pos.z)local d6,d7=client.WorldToScreen(d5)if cL~=nil and cM~=nil and cY~=nil and cZ~=nil and d0~=nil and d1~=nil and d3~=nil and d4~=nil and d6~=nil and d7~=nil then if cA.distance<a1:GetValue()then if cA.name~=nil then if a0:GetValue()then local cV,cW=draw.GetTextSize(cA.name)draw.Color(ac:GetValue())draw.Text(cL-cV/2,cM-20-cW/2,cA.name)end end;if cJ then if Z:GetValue()then draw.Color(aa:GetValue())else draw.Color(255,255,255,0)end else if _:GetValue()then draw.Color(ab:GetValue())end end;draw.Line(cY,cZ,d0,d1)draw.Line(cY,cZ,d3,d4)draw.Line(cY,cZ,d6,d7)draw.Line(d6,d7,d0,d1)draw.Line(d6,d7,d3,d4)draw.Line(d0,d1,d3,d4)end end end end;function getThrowPosition(d8,d9,da,db,dc,cN)return d8-c4*math.cos(math.rad(dc+180)),d9-c4*math.sin(math.rad(dc+180)),da-c4*math.tan(math.rad(db))+cN end;function getWeaponName(aM)if aM~=nil then local aO=aM:GetPropEntity("m_hActiveWeapon")if aO==nil then return nil end;local aP=aO:GetClass()if aP~=nil then aP=aP:gsub("CWeapon","")aP=aP:lower()if aP:sub(1,1)=="c"then aP=aP:sub(2)end;if aP=="incendiarygrenade"then aP="molotovgrenade"end end;return aP end;return nil end;function getDistanceToTarget(dd,de,df,cO,cP,cQ)local a_=dd-cO;local b0=de-cP;local dg=df-cQ;return math.sqrt(a_*a_+b0*b0+dg*dg)end;function dump(dh)if type(dh)=='table'then local di='{ 'for dj,cB in pairs(dh)do if type(dj)~='number'then dj='"'..dj..'"'end;di=di..'['..dj..'] = '..dump(cB)..','end;return di..'} 'else return tostring(dh)end end;function getActiveThrows(dk,aM,dl)local dm={}local dn={}for bf=1,#dk do local cA=dk[bf]if cA~=nil and cA.nade==dl then local cx=aM:GetAbsOrigin()local cF=getDistanceToTarget(cx.x,cx.y,cA.pos.z,cA.pos.x,cA.pos.y,cA.pos.z)cA.distance=cF;if cF<a4:GetValue()then table.insert(dn,cA)else table.insert(dm,cA)end end end;if#dn>0 then return dn,true end;return dm,false end;function getClosestThrow(dk,aM,aw)local cE;local dp;local dq;local cx=aM:GetAbsOrigin()for bf=1,#dk do local cA=dk[bf]local cF=getDistanceToTarget(cx.x,cx.y,cA.pos.z,cA.pos.x,cA.pos.y,cA.pos.z)local cN=64;if cA.type=="crouch"then cN=46 end;local d8,d9,da=getThrowPosition(cA.pos.x,cA.pos.y,cA.pos.z,cA.ax,cA.ay,cN)local cR=Vector3(d8,d9,da)local cS,cT=client.WorldToScreen(cR)local dr;if cS~=nil and cT~=nil then dr=math.abs(ci/2-cS+cj/2-cT)end;if dp==nil or cF<=a4:GetValue()and(dq==nil or dq~=nil and dr~=nil and dr<dq)or dq==nil and cF<dp then cE=cA;dp=cF;dq=dr end end;return cE,dp end;function parseStringifiedTable(ds)local dt={}local du={}for bf in string.gmatch(ds,"([^\n]*)\n")do table.insert(du,bf)end;for bf=1,#du do local dv={}for dw in string.gmatch(du[bf],"([^,]*)")do table.insert(dv,dw)end;local dx=dv[1]if dt[dx]==nil then dt[dx]={}end;table.insert(dt[dx],{name=dv[3],type=dv[5],nade=dv[7],pos={x=tonumber(dv[9]),y=tonumber(dv[11]),z=tonumber(dv[13])},ax=tonumber(dv[15]),ay=tonumber(dv[17])})end;return dt end;function convertTableToDataString(dy)local dz=""for dx,dk in pairs(dy)do for bf,cA in ipairs(dk)do if cA~=nil then dz=dz..dx..','..cA.name..','..cA.type..','..cA.nade..','..cA.pos.x..','..cA.pos.y..','..cA.pos.z..','..cA.ax..','..cA.ay..'\n'end end end;return dz end;function hasValue(dA,dB)for dC,cv in ipairs(dA)do if cv==dB then return true end end;return false end;local dD=false;local dE=140;local dF=10;local dG=1;local dH=1;local dI=1;local dJ=50;local dK=0;local dL=0;function DesyncFlick()if G:GetValue()==5 then dI=dE;dJ=dE+dF;if dK>dI then rotation3=rotation3*-1;if dK==dJ then dK=0 end else if dL>1 then rotation3=rotation3;dL=0 end end;dK=dK+1;dL=dL+1 end end;function delaytimer(aw)if aw.tick_count%A:GetValue()==0 then fovrandomized=math.random(minValue,maxValue)end end;local function dM()rotationAmount=gui.GetValue("rbot.antiaim.base.rotation")lbyAmount=gui.GetValue("rbot.antiaim.base.lby")yawAmount=gui.GetValue("rbot.antiaim.base")fovAmount=gui.GetValue("rbot.aim.target.fov")end;local function dN()if input.IsButtonPressed(M:GetValue())then rotation=rotation*-1;rotation2=rotation2*-1;rotation3=rotation3*-1;lby=lby*-1;lby2=lby2*-1;rotationRANDOMIZED=rotationRANDOMIZED*-1;lbyRANDOMIZED=lbyRANDOMIZED*-1 end end;local function dO(aw)setFont(b)if aw.tick_count%H:GetValue()==0 then if G:GetValue()==4 then rotation2=rotation2*-1 end end end;local function dP()if input.IsButtonPressed(D:GetValue())then toggle=not toggle end;if toggle then SetVal("rbot.hitscan.mode.shared.autowall",1)SetVal("rbot.hitscan.mode.pistol.autowall",1)SetVal("rbot.hitscan.mode.hpistol.autowall",1)SetVal("rbot.hitscan.mode.smg.autowall",1)SetVal("rbot.hitscan.mode.rifle.autowall",1)SetVal("rbot.hitscan.mode.shotgun.autowall",1)SetVal("rbot.hitscan.mode.scout.autowall",1)SetVal("rbot.hitscan.mode.asniper.autowall",1)SetVal("rbot.hitscan.mode.sniper.autowall",1)SetVal("rbot.hitscan.mode.lmg.autowall",1)else SetVal("rbot.hitscan.mode.shared.autowall",0)SetVal("rbot.hitscan.mode.pistol.autowall",0)SetVal("rbot.hitscan.mode.hpistol.autowall",0)SetVal("rbot.hitscan.mode.smg.autowall",0)SetVal("rbot.hitscan.mode.rifle.autowall",0)SetVal("rbot.hitscan.mode.shotgun.autowall",0)SetVal("rbot.hitscan.mode.scout.autowall",0)SetVal("rbot.hitscan.mode.asniper.autowall",0)SetVal("rbot.hitscan.mode.sniper.autowall",0)SetVal("rbot.hitscan.mode.lmg.autowall",0)end end;local function dQ()if z:GetValue()then setFont(d)if input.IsButtonPressed(E:GetValue())then toggle2=not toggle2 end;if toggle2 then color(10,255,10)text(5,840,"OBV")SetVal("rbot.aim.key",key-1)SetVal("rbot.aim.target.fov",fovrandomized+3)SetVal("rbot.aim.target.silentaim",SilntAIM)else color(255,69,0)text(5,840,"OBV")SetVal("rbot.aim.key",key)SetVal("rbot.aim.target.fov",fovrandomized)SetVal("rbot.aim.target.silentaim",SilntAIM-1)end end end;local function dR()setFont(b)if z:GetValue()then color(124,176,34)text(5,920,"SEMIAIM")SetVal("rbot.aim.target.fov",fovrandomized)SetVal("rbot.accuracy.weapon.rifle.hitchance",60)SetVal("rbot.accuracy.weapon.rifle.mindmg",25)SetVal("rbot.accuracy.weapon.pistol.hitchance",55)SetVal("rbot.accuracy.weapon.pistol.mindmg",14)SetVal("rbot.accuracy.weapon.hpistol.hitchance",60)SetVal("rbot.accuracy.weapon.hpistol.mindmg",35)SetVal("rbot.accuracy.weapon.smg.hitchance",42)SetVal("rbot.accuracy.weapon.smg.mindmg",12)SetVal("rbot.accuracy.weapon.shotgun.hitchance",45)SetVal("rbot.accuracy.weapon.shotgun.mindmg",25)SetVal("rbot.accuracy.weapon.scout.hitchance",70)SetVal("rbot.accuracy.weapon.scout.mindmg",55)SetVal("rbot.accuracy.weapon.asniper.hitchance",60)SetVal("rbot.accuracy.weapon.asniper.mindmg",20)SetVal("rbot.accuracy.weapon.sniper.hitchance",85)SetVal("rbot.accuracy.weapon.sniper.mindmg",75)SetVal("rbot.accuracy.weapon.lmg.hitchance",35)SetVal("rbot.accuracy.weapon.lmg.mindmg",6)SetVal("rbot.aim.key",key)else color(255,25,25,255)text(5,920,"SEMIAIM")end end;local function dS()if ping>70 then SetVal("rbot.antiaim.base.rotation",0)SetVal("rbot.antiaim.base.lby",0)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign","Off")SetVal("rbot.antiaim.advanced.pitch","Off")SetVal("rbot.antiaim.base",0)elseif ping<70 then if G:GetValue()==0 then setFont(b)text(5,900,"OFF")SetVal("rbot.antiaim.base.rotation",0)SetVal("rbot.antiaim.base.lby",0)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign","Off")SetVal("rbot.antiaim.advanced.pitch","Off")SetVal("rbot.antiaim.base",0)elseif G:GetValue()==1 then setFont(b)text(5,900,"MINIMUM")SetVal("rbot.antiaim.base.rotation",rotation)SetVal("rbot.antiaim.base.lby",0)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign","Off")SetVal("rbot.antiaim.advanced.pitch","Off")SetVal("rbot.antiaim.base",0)elseif G:GetValue()==2 then setFont(b)text(5,900,"MAXIMUM")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotation)SetVal("rbot.antiaim.base.lby",lby)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",1)SetVal("rbot.antiaim.advanced.pitch","Off")elseif G:GetValue()==3 then setFont(b)text(5,900,"RANDOMIZED")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotationRANDOMIZED)SetVal("rbot.antiaim.base.lby",lbyRANDOMIZED)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",1)SetVal("rbot.antiaim.advanced.pitch","Off")elseif G:GetValue()==4 then setFont(b)text(5,900,"JITTER")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotation2)SetVal("rbot.antiaim.base.lby",lby2)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",0)SetVal("rbot.antiaim.advanced.pitch","Off")elseif G:GetValue()==5 then setFont(b)text(5,900,"ANTI-BRUTE")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotation3)SetVal("rbot.antiaim.base.lby",lby2)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",0)SetVal("rbot.antiaim.advanced.pitch","Off")end;if N:GetValue()then setFont(b)color(0,204,0)text(5,880,"FL")SetVal("misc.fakelag.enable",1)SetVal("misc.fakelag.factor",4.0)else color(255,0,0)text(5,880,"FL")SetVal("misc.fakelag.enable",0)end end end;local function dT()if z:GetValue()then setFont(d)if GetVal("rbot.hitscan.mode.shared.autowall")then color(124,176,34)text(5,860,"AWALL")else color(255,25,55)text(5,860,"AWALL")end end end;local function dU()if z:GetValue()then setFont(d)if input.IsButtonPressed(F:GetValue())then toggle3=not toggle3 end;if toggle3 then color(124,176,34)text(5,660,"RESOLVER")SetVal("rbot.accuracy.posadj.resolver",1)else color(255,10,10)text(5,660,"RESOLVER")SetVal("rbot.accuracy.posadj.resolver",0)end end end;local function dV()if O:GetValue()then setFont(e)if lbyAmount>1 then color(P:GetValue())text(890,530,"<")elseif lbyAmount<-1 then color(P:GetValue())text(1010,530,">")end end end;local function dW()if Q:GetValue()then color(R:GetValue())text(948,548,"fov")text(970,548,fovAmount)end end;local function dX()text(5,540,ping)end;local function dY()if S:GetValue()==0 then setFont(e)color(255,255,255,255)text(5,5,"Icarus 1.0.8")elseif S:GetValue()==1 then color(255,255,255,255)draw.SetTexture(j)draw.FilledRect(-15,-15,220,220)end end;EssentialsNP={}EssentialsNP.Vector3={}EssentialsNP.Drawing={}local function dZ(d_,e0)return{d_[1]+e0[1],d_[2]+e0[2],d_[3]+e0[3]}end;local function e1(d_,e0)return{d_[1]-e0[1],d_[2]-e0[2],d_[3]-e0[3]}end;local function e2(d_,e0)local e3=e1(d_,e0)return math.sqrt(e3[1]^2+e3[2]^2+e3[3]^2)end;local function e4(d_,e0)local e3=e1(d_,e0)local e5=e2(d_,e0)local e6=math.asin(e3[3]/e5)*-(180/math.pi)local e7=math.atan(e3[2]/e3[1])*180/math.pi;if e3[1]<=0 then e7=e7+180 end;return{e6,e7}end;local function e8(d_)local e9=math.floor(math.sin(d_*3)*127+128)local ea=math.floor(math.sin(d_*3+2)*127+128)local eb=math.floor(math.sin(d_*3+4)*127+128)return{e9,ea,eb}end;EssentialsNP.Vector3.Add=dZ;EssentialsNP.Vector3.Subtract=e1;EssentialsNP.Vector3.Hypotenuse=e2;EssentialsNP.Vector3.GetAngles=e4;EssentialsNP.Drawing.Hue=e8;local ec={100,100,100,255}local ed=false;local ee=1;local function ef()if U:GetValue()then local Legitbot=true else local Legitbot=false end end;local eg={}local eh={nil,nil}local function ei(ej)if ej:GetName()=="round_start"or ej:GetName()=="round_prestart"then eg={}end end;local function ek()LocalPlayer=entities.GetLocalPlayer()for dC,el in pairs(entities.FindByClass("CCSPlayer"))do local em=false;local en=0;if U:GetValue()and gui.GetValue("rbot.master")then em=true end;if em then if gui.GetValue("misc.master")and gui.GetValue("misc.fakelatency.enable")then en=gui.GetValue("misc.fakelatency.amount")end;if el:GetIndex()~=LocalPlayer:GetIndex()and(LocalPlayer:GetTeamNumber()~=el:GetTeamNumber()or FriendlyFire)and el:IsAlive()then lastTick={nil,nil}if eg[el:GetIndex()]==nil then eg[el:GetIndex()]={}end;table.insert(eg[el:GetIndex()],{{el:GetHitboxPosition("HITGROUP_HEAD")},globals.RealTime()})for eo,ep in pairs(eg[el:GetIndex()])do if ep[2]+0.2+en<globals.RealTime()then table.remove(eg[el:GetIndex()],eo)else local eq=false;local er,es=client.WorldToScreen(ep[1][1],ep[1][2],ep[1][3])local et={LocalPlayer:GetHitboxPosition("HITGROUP_HEAD")}if Legitbot==false then if engine.TraceLine(ep[1][1],ep[1][2],ep[1][3],et[1],et[2],et[3],1)==1 then eq=true end end;if er~=nil and es~=nil and not eq then local eu={}if ep[2]-0.2<=globals.RealTime()-en then if RainbowTrail then eu=EssentialsNP.Drawing.Hue(ep[2])eu[4]=255 else eu={gui.GetValue("esp.chams.backtrack.occluded.clr")}end else eu=ec end;draw.Color(eu[1],eu[2],eu[3],eu[4])if ee>=1 then draw.FilledRect(er-ee,es-ee,er+ee,es+ee)else if lastTick[1]~=nil and lastTick[2]~=nil then draw.Line(er,es,lastTick[1],lastTick[2])end;lastTick={er,es}end end end end end end end end;function GUIHandler()if z:GetValue()then A:SetInvisible(false)E:SetInvisible(false)G:SetInvisible(false)I:SetInvisible(false)J:SetInvisible(false)K:SetInvisible(false)L:SetInvisible(false)B:SetInvisible(false)C:SetInvisible(false)M:SetInvisible(false)N:SetInvisible(false)O:SetInvisible(false)P:SetInvisible(false)Q:SetInvisible(false)R:SetInvisible(false)F:SetInvisible(false)D:SetInvisible(false)H:SetInvisible(false)else A:SetInvisible(true)E:SetInvisible(true)G:SetInvisible(true)I:SetInvisible(true)J:SetInvisible(true)K:SetInvisible(true)L:SetInvisible(true)B:SetInvisible(true)C:SetInvisible(true)M:SetInvisible(true)N:SetInvisible(true)O:SetInvisible(true)P:SetInvisible(true)Q:SetInvisible(true)R:SetInvisible(true)F:SetInvisible(true)D:SetInvisible(true)H:SetInvisible(true)end;if V:GetValue()then W:SetInvisible(false)X:SetInvisible(false)Y:SetInvisible(false)Z:SetInvisible(false)_:SetInvisible(false)a0:SetInvisible(false)a5:SetInvisible(false)a1:SetInvisible(false)a2:SetInvisible(false)a3:SetInvisible(false)a4:SetInvisible(false)a6:SetInvisible(false)a7:SetInvisible(false)a9:SetInvisible(false)aa:SetInvisible(false)ab:SetInvisible(false)ac:SetInvisible(false)a8:SetInvisible(false)else W:SetInvisible(true)X:SetInvisible(true)Y:SetInvisible(true)Z:SetInvisible(true)_:SetInvisible(true)a0:SetInvisible(true)a5:SetInvisible(true)a1:SetInvisible(true)a2:SetInvisible(true)a3:SetInvisible(true)a4:SetInvisible(true)a6:SetInvisible(true)a7:SetInvisible(true)a9:SetInvisible(true)aa:SetInvisible(true)ab:SetInvisible(true)ac:SetInvisible(true)a8:SetInvisible(true)end;if o:GetValue()then x:SetPosY(600)p:SetInvisible(false)q:SetInvisible(false)r:SetInvisible(false)s:SetInvisible(false)t:SetInvisible(false)u:SetInvisible(false)v:SetInvisible(false)w:SetInvisible(false)else x:SetPosY(120)p:SetInvisible(true)q:SetInvisible(true)r:SetInvisible(true)s:SetInvisible(true)t:SetInvisible(true)u:SetInvisible(true)v:SetInvisible(true)w:SetInvisible(true)end end;local ev={}local ew=false;local ex=false;local function ey(ez,bw)if not af:GetValue()then return end;local eA={client.WorldToScreen(Vector3(ez.x,ez.y,ez.z))}for eB=1,360,1 do local eC=nil;local eD=nil;if ez.z==nil then eC={ez.x+math.sin(math.rad(eB))*bw,ez.y+math.cos(math.rad(eB))*bw}eD={ez.x+math.sin(math.rad(eB-1))*bw,ez.y+math.cos(math.rad(eB-1))*bw}else eC={client.WorldToScreen(Vector3(ez.x+math.sin(math.rad(eB))*bw,ez.y+math.cos(math.rad(eB))*bw,ez.z))}eD={client.WorldToScreen(Vector3(ez.x+math.sin(math.rad(eB-1))*bw,ez.y+math.cos(math.rad(eB-1))*bw,ez.z))}end;if eC[1]~=nil and eC[2]~=nil and eD[1]~=nil and eD[2]~=nil then draw.Color(ah:GetValue())draw.Triangle(eC[1],eC[2],eD[1],eD[2],eA[1],eA[2])draw.Color(ag:GetValue())draw.Line(eC[1],eC[2],eD[1],eD[2])end end end;callbacks.Register("Draw",function()local eE=entities.GetLocalPlayer()if input.IsButtonDown(ae:GetValue())and not ew then ev=eE:GetAbsOrigin()ew=true end;if ew and input.IsButtonDown(ae:GetValue())then ey(ev,12)else if ew then ev=eE:GetAbsOrigin()end end end)callbacks.Register("CreateMove",function(aw)local eE=entities.GetLocalPlayer()if ex and input.IsButtonDown(ae:GetValue())then local eF={engine.GetViewAngles().x,engine.GetViewAngles().y,engine.GetViewAngles().z}local eG={vector.Subtract({ev.x,ev.y,ev.z},{eE:GetAbsOrigin().x,eE:GetAbsOrigin().y,eE:GetAbsOrigin().z})}aw.forwardmove=(math.sin(math.rad(eF[2]))*eG[2]+math.cos(math.rad(eF[2]))*eG[1])*200;aw.sidemove=(math.cos(math.rad(eF[2]))*-eG[2]+math.sin(math.rad(eF[2]))*eG[1])*200;if vector.Length(eG)<10 then ex=false end end end)client.AllowListener("player_hurt")callbacks.Register("FireGameEvent",function(eH)local eI=client.GetLocalPlayerIndex()local eJ=client.GetPlayerIndexByUserID(eH:GetInt("userid"))local eK=client.GetPlayerIndexByUserID(eH:GetInt("attacker"))if eJ==eI and eK~=eI then ex=true end end)client.AllowListener("round_start")client.AllowListener("round_prestart")callbacks.Register("Draw","backtrackable_line_draw",ek)callbacks.Register("FireGameEvent","backtrackable_line_event",ei)client.AllowListener("player_say")callbacks.Register("FireGameEvent","GH_EVENT",gameEventHandler)callbacks.Register("CreateMove","GH_MOVE",moveEventHandler)callbacks.Register("CreateMove",delaytimer)callbacks.Register("CreateMove",dO)callbacks.Register("Draw","GH_DRAW",drawEventHandler)callbacks.Register("Draw",dR)callbacks.Register("Draw",dS)callbacks.Register("Draw",dN)callbacks.Register("Draw",dP)callbacks.Register("Draw",dT)callbacks.Register("Draw",dQ)callbacks.Register("Draw",dU)callbacks.Register("Draw",dY)callbacks.Register("Draw",dM)callbacks.Register("Draw",dV)callbacks.Register("Draw",dW)callbacks.Register("Draw",ai)callbacks.Register("Draw",dX)callbacks.Register("Draw","DesyncFlick",DesyncFlick)callbacks.Register("Draw",ef)callbacks.Register("Draw",GUIHandler)


--- Auto updater
local function handleUpdates()

    if (update_available and not update_downloaded) then
        ICARUS_UPDATER_TEXT:SetText("Update is getting downloaded.")
        local new_version_content = http.Get(SCRIPT_FILE_ADDR);
        local old_script = file.Open(SCRIPT_FILE_NAME, "w");
        old_script:Write(new_version_content);
        old_script:Close();
        update_available = false;
        update_downloaded = true;
    end

    if (update_downloaded) then
        ICARUS_UPDATER_TEXT:SetText("Update available, please reload the script.")
        return;
    end

    if (not version_check_done) then
        version_check_done = true;
        local version = http.Get(VERSION_FILE_ADDR);
        if (version ~= VERSION_NUMBER) then
            update_available = true;
        end
    end
end


callbacks.Register("Draw", handleUpdates)