local SCRIPT_FILE_NAME = GetScriptName();
local SCRIPT_FILE_ADDR = "https://raw.githubusercontent.com/vpumav/ICARUS/master/ICARUS.lua";
local VERSION_FILE_ADDR = "https://raw.githubusercontent.com/vpumav/ICARUS/master/version.txt";
local VERSION_NUMBER = "1.0.8"; --- This too
local version_check_done = false;
local update_downloaded = false;
local update_available = false;

--- Auto Updater GUI Stuff
local ICARUS_UPDATER_TAB = gui.Tab(gui.Reference("Settings"), "icarus.updater.tab", "ICARUS™ Autoupdater")
local ICARUS_UPDATER_GROUP = gui.Groupbox(ICARUS_UPDATER_TAB, "Auto Updater for ICARUS™ | v" .. VERSION_NUMBER, 15, 15, 600, 600)
local ICARUS_UPDATER_TEXT = gui.Text(ICARUS_UPDATER_GROUP, "")
--- AUTO UPDATER END



local a=false;setFont=draw.SetFont;createFont=draw.CreateFont;getScreenSize=draw.GetScreenSize;getLocal=entities.GetLocalPlayer;color=draw.Color;text=draw.TextShadow;SetVal=gui.SetValue;GetVal=gui.GetValue;local b=createFont("Verdana",30,1500)local c=createFont("Arial",30,1500)local d=createFont("Segoe UI",30,1500)local e=createFont("Segoe UI",20,1500)local f=http.Get("https://i.ibb.co/2YKz5C7/Icarus-FERTIG.png")local g,h,i=common.DecodePNG(f)local j=draw.CreateTexture(g,h,i)local k=gui.Reference(ALEGIT)local l=gui.Groupbox(k,"Advanced Legit Bot",15,5,297,300)local m=gui.Groupbox(k,"Extra's",320,445,297,300)local n=gui.Checkbox(l,"lbot.sonar.enabled","Enable",false)local o=gui.Slider(l,"lbot.sonar.volume","Volume",50,1,100,1)local p=gui.Combobox(l,"lbot.sonar.enabled","Sound","Button 17","Button 15","Blip 1","Blip 2","Bell","Button 10")local q=gui.Slider(l,"lbot.sonar.distance","Distance",200,100,1500,10)local r=gui.Slider(l,"lbot.sonar.fov","FOV",180,1,180,1)local s=gui.Slider(l,"lbot.sonar.fov","FOV rotation",180,0,360,1)local t=gui.Checkbox(l,"lbot.sonar.distancebasedfreq","Distancebased Beep frequency",false)local u=gui.Checkbox(l,"lbot.sonar.distancebasedvol","Distancebased Beep frequency",false)local v=gui.Checkbox(l,"lbot.sonar.visualize","Visualize FOV",false)local w=gui.Groupbox(k,"Grenade Helper",15,600,297,300)local x=gui.Groupbox(k,"Semirage (WARNING: Ragebots Gets Enabled)",320,720,297,300)local y=gui.Checkbox(x,"semirage.aimbot","SEMI-AIM",false)local z=gui.Slider(x,"semirage.fovrndmtimer","Fov Randomizer Time",1,1,60)local A=gui.Slider(x,"semirage.fovrndm1","Minimum FOV",1,1,30)local B=gui.Slider(x,"semirage.fovrndm2","Maximum FOV",1,1,30)local C=gui.Keybox(x,"semirage.autowall","Autowall key",72)local D=gui.Keybox(x,"semirage.obvious","Obvious Mode on Key",72)local E=gui.Keybox(x,"semirage.resolver","Toggle Resolver on key",72)local F=gui.Combobox(x,"semirage.legitAA.mode","Legit AA Modes","Off","Safe","Maximum","Randomized","Jitter","Anti-Brute")local G=gui.Slider(x,"semirage.legitAA.AntiBrute","Anti Brute Tick time",1,1,80)local H=gui.Slider(x,"semirage.legitAA.rndm1","rotation randomizer 1",1,1,58)local I=gui.Slider(x,"semirage.legitAA.rndm2","rotation randomizer 2",1,1,58)local J=gui.Slider(x,"semirage.legitAA.rndm3","lby randomizer 1",1,-58,1)local K=gui.Slider(x,"semirage.legitAA.rndm4","lby randomizer 2",1,-58,1)local L=gui.Keybox(x,"semirage.aa.inverter.key","Base Rotation Inverter",72)local M=gui.Checkbox(x,"semirage.fakelag","Fake LAG",false)local N=gui.Checkbox(x,"semirage.extra.desyncindicator","Desync Indicator",false)local O=gui.ColorPicker(x,"semirage.extra.desynccolor","Desync Indicator Color",255,255,255,255)local P=gui.Checkbox(x,"semirage.extra.fovindicator","FOV  Indicator",false)local Q=gui.ColorPicker(x,"semirage.extra.fovccator Color",255,255,255,255)local R=gui.Combobox(m,"icarus.showlogo","Icarus LOGO's","Simple","Normal")local S=gui.Checkbox(m,"icarus.pingindicator","Indicate the ping",false)local function T()minValue=A:GetValue()maxValue=B:GetValue()legitaarandom1=H:GetValue()legitaarandom2=I:GetValue()legitaarandomlby1=J:GetValue()legitaarandomlby2=K:GetValue()rotationRANDOMIZED=math.random(legitaarandom1,legitaarandom2)lbyRANDOMIZED=math.random(legitaarandomlby1,legitaarandomlby2)ping=entities.GetPlayerResources():GetPropInt("m_iPing",client.GetLocalPlayerIndex())end;rotation=58;rotation2=56;rotation3=56;lby2=-60;lby=-60;key=1;SilntAIM=1;n:SetDescription("Enables Sonar ESP.")p:SetDescription("Select which sound should be played.")o:SetDescription("Master volume of the sound.")q:SetDescription("Distance of the FOV.")r:SetDescription("Field of view of the sonar.")s:SetDescription("Rotation of the FOV.")t:SetDescription("Play sound more frequently when enemies are near.")u:SetDescription("Play sound louder when enemies are near.")v:SetDescription("Visualize the FOV.")local U=0;local V={"button17","button15","blip1","blip2","bell1","button10"}local W=math.rad;local X=math.cos;local Y=math.sin;local Z=math.sqrt;local _=math.atan;local a0=client.WorldToScreen;local a1=draw.Line;local a2=gui.Groupbox(k,"Visual stuff",320,5,297,300)local a3=gui.Checkbox(a2,"crosshair.recoilcrosshair","Recoil Crosshair",1)local a4=gui.ColorPicker(a3,"recoilcolor","Recoil Crosshair Color",255,255,255,255)local a5=gui.Checkbox(a2,"crosshair.recoilidle","Hide Recoil Crosshair When Idle",1)a4:SetDescription("Pick the Color of the recoil Crosshair")a3:SetDescription("Enables the recoil Crosshair")a5:SetDescription("Disables the recoil Crosshair if it's Idling")local a6=client.GetPlayerIndexByUserID;local a7=client.GetLocalPlayerIndex;local a8;local a9;local aa=gui.Checkbox(m,'lua.quick.switch','Quick Switch AWP',0)local function ab(ac)if aa:GetValue()then if ac:GetName()~='weapon_fire'then return end;if gui.GetValue("misc.fakelatency.enable")then return end;local ad=a7()local ae=ac:GetInt('userid')if ad==a6(ae)then local af=ac:GetString('weapon')if af=='weapon_awp'then client.Command('slot3',true)flip=true end end end end;client.AllowListener('weapon_fire')callbacks.Register('FireGameEvent','on_weapon_fire',ab)local function ag(ac)if ac:GetName()~='item_equip'then return end;local ad=a7()local ae=ac:GetInt('userid')local ah=ac:GetString('item')if ad==a6(ae)then a9=ah end end;client.AllowListener('item_equip')callbacks.Register('FireGameEvent','on_item_equip',ag)function reset_tick(ai)if flip then if a9~='awp'then client.Command("slot1",true)flip=false end end end;callbacks.Register('CreateMove','reset_tick',reset_tick)local function aj()local ak=0;local al=entities.GetLocalPlayer()if al~=nil and not gui.GetValue("rbot.master")then if al:IsAlive()then local am=al:GetProp("m_bIsScoped")if am==256 then am=0 end;if am==257 then am=1 end;local an=al:GetPropEntity("m_hActiveWeapon")if an~=nil then local ao=an:GetClass()local ap=0;local aq=0;ao=string.gsub(ao,"CWeapon","")if ao=="Aug"or ao=="SG556"then ak=1 else ak=0 end;if am==0 or am==1 and ak==1 then ap=1 else ap=0 end;if ao=="Taser"or ao=="CKnife"then ap=0 end;if ao=="AWP"or ao=="SCAR20"or ao=="G3SG1"or ao=="SSG08"then aq=1 end;if a3:GetValue()and ap==1 then local ar=al:GetPropVector("localdata","m_Local","m_aimPunchAngle")local as,at=ar.x,ar.y;local au,av=draw.GetScreenSize()local aw=au/2;local ax=av/2;local ay=90;if ay==0 then ay=90 end;if am==1 and ak==1 then ay=45 end;local az=au/ay;local aA=av/ay;local aB=0;local aC=0;if gui.GetValue("esp.other.norecoil")then aB=aw-az*at*1.2;aC=ax+aA*as*2 else aB=aw-az*at*0.6;aC=ax+aA*as end;if aB>aw-0.5 and aB<aw then aB=aw end;if aB<aw+0.5 and aB>aw then aB=aw end;if aC>ax-0.5 and aC<ax then aC=ax end;if aC<ax+0.5 and aC>ax then aC=ax end;if a5:GetValue()then if aB==aw and aC==ax and aq~=1 then return end end;draw.Color(a4:GetValue())draw.FilledRect(aB-3,aC-1,aB+3,aC+1)draw.FilledRect(aB-1,aC-3,aB+1,aC+3)end end end end end;callbacks.Register("Draw","punch",aj)local aD={}local aE=gui.Checkbox(m,"aspect_ratio_check","Aspect Ratio Changer",false)local aF=gui.Slider(m,"aspect_ratio_reference","Force aspect ratio",100,1,199)local function aG(aH,aI)while aH~=0 do aH,aI=math.fmod(aI,aH),aH end;return aI end;local function aJ(aK)local aL,aM=draw.GetScreenSize()local aN=aL*aK/aM;if aK==1 or not aE:GetValue()then aN=0 end;client.SetConVar("r_aspectratio",tonumber(aN),true)end;local function aO()local aL,aM=draw.GetScreenSize()for aP=1,200 do local aQ=aP*0.01;aQ=2-aQ;local aR=aG(aL*aQ,aM)if aL*aQ/aR<100 or aQ==1 then aD[aP]=aL*aQ/aR..":"..aM/aR end end;local aS=aF:GetValue()*0.01;aS=2-aS;aJ(aS)end;callbacks.Register('Draw',"Aspect Ratio",aO)local aT=client.GetConVar("fov_cs_debug")local aU=client.GetConVar("viewmodel_fov")local aV=gui.Slider(a2,"view_fov","View",aT,0,120)local aW=gui.Slider(a2,"view_model_fov","Viewmodel",aU,0,120)local aX=gui.Slider(a2,"view_model_offset_x","Viewmodel X Offset",0,-10,10,0.1)local aY=gui.Slider(a2,"view_model_offset_y","Viewmodel Y Offset",0,-10,10,0.1)local aZ=gui.Slider(a2,"view_model_offset_z","Viewmodel Z Offset",0,-10,10,0.1)local function a_()if aV:GetValue()and aW:GetValue()and aX:GetValue()and aY:GetValue()and aZ:GetValue()then client.SetConVar("fov_cs_debug",aV:GetValue(),true)client.SetConVar("viewmodel_fov",aW:GetValue(),true)client.SetConVar("viewmodel_offset_x",aX:GetValue(),true)client.SetConVar("viewmodel_offset_y",aY:GetValue(),true)client.SetConVar("viewmodel_offset_z",aZ:GetValue(),true)end end;callbacks.Register("Draw","Field of View",a_)local b0=gui.Checkbox(a2,"crosshair.onsniper","Crosshair on Sniper",false)local function b1()if b0:GetValue()then local b2=1;local b3=entities.GetLocalPlayer()if b3==nil then return end;if b2==0 or b2==1 and b3:GetProp("m_bIsScoped")%1==0 or b2==2 and gui.GetValue("vis_scoperemover")==1 or b2==2 and gui.GetValue("vis_scoperemover")~=1 and b3:GetProp("m_bIsScoped")%2==0 then if client.GetConVar("weapon_debug_spread_show")~=3 then client.SetConVar("weapon_debug_spread_show",3,true)end else if client.GetConVar("weapon_debug_spread_show")~=0 then client.SetConVar("weapon_debug_spread_show",0,true)end end end end;callbacks.Register("Draw","force_crosshair_draw",b1)local function b4(b5,b6,color)local b7,b8;draw.Color(color[1],color[2],color[3],color[4])local ay=r:GetValue()local b9=180-s:GetValue()local ba=engine.GetViewAngles()ba.y=ba.y+b9+180-ay;ba:Normalize()for rotation=ba.y,ba.y+ay*2,1 do local bb=W(rotation)local bc=Vector3(b6*X(bb)+b5.x,b6*Y(bb)+b5.y,b5.z)local aw,ax=a0(bc)if ay~=180 then if rotation==ba.y or rotation==ba.y+ay*2 then local bd,be=a0(b5)if aw~=nil and bd~=nil then a1(aw,ax,bd,be)for aP=0,4 do a1(aw,ax+aP,bd,be+aP)end end end end;if aw~=nil and b7~=nil then a1(aw,ax,b7,b8)for aP=0,4 do a1(aw,ax+aP,b7,b8+aP)end end;b7,b8=aw,ax end end;local function bf(bg)return Z(bg.x*bg.x+bg.y*bg.y+bg.z*bg.z)end;local function bh(bi,bj)return Vector3(bi.x-bj.x,bi.y-bj.y,bi.z-bj.z)end;local function bk(bl,bm)local bn=EulerAngles(0,0,0)local bo=bh(bl,bm)local bp=bf(bo)bn.x=_(bo.z/bp)*180.0/3.14159265358979323846;bn.y=_(bo.y/bo.x)*180.0/3.14159265358979323846;bn.z=0.0;if bo.x>=0.0 then bn.y=bn.y+180.0 end;bn:Normalize()return bn end;local function bq()local br=entities.GetLocalPlayer()if br and br:IsAlive()and n:GetValue()then local bs=br:GetAbsOrigin()local bt=0;local bu=0;local bv=1;local bw=9999;local ay=r:GetValue()local b9=s:GetValue()local ba=engine.GetViewAngles()local bx=q:GetValue()for aP=1,64,1 do local by=entities.GetByIndex(aP)if by and by:IsAlive()then if by:GetTeamNumber()~=br:GetTeamNumber()then bu=bu+1;local bz=by:GetAbsOrigin()local bA=bk(bs,bz)local bB=Z((bs.x-bz.x)^2+(bs.y-bz.y)^2)if bB<=bx then bA.y=bA.y-ba.y+b9;bA:Normalize()if bA.y<0 then if bA.y>=ay*-1 then bt=bt+1 end elseif bA.y>0 then if bA.y<=ay then bt=bt+1 end end;if bB<bw then bw=bB end end end end end;if t:GetValue()then bv=0.1+0.8*bw/1500 end;if bt>0 and U<globals.RealTime()-bv then local bC=V[p:GetValue()+1]local bD=o:GetValue()/100;if u:GetValue()then bD=(1-bw/1500)*bD end;client.Command("playvol buttons/"..bC.." "..bD,true)U=globals.RealTime()end;if v:GetValue()then b4(bs,bx,{255*bt/bu,25,25,155})end end end;callbacks.Register("Draw",bq)local bE=100;local bF=100;local bG=30;local bH=40;local bI="grenade_helper_data.dat"local bJ=gui.Checkbox(w,"gh_enabled","Grenade Helper Enabled",1)local bK=gui.Slider(w,"gh_rect_size","Throw Rect Size",10,0,25)local bL=gui.Checkbox(w,"gh_ch_throw","Throw Rectangle Enabled",1)local bM=gui.Checkbox(w,"gh_ch_throwline","Throw Helper Line Enabled",1)local bN=gui.Checkbox(w,"gh_ch_standbox","Stand Box Enabled",1)local bO=gui.Checkbox(w,"gh_ch_standbox_ood","Stand Box Out of Distance Custom Color",1)local bP=gui.Checkbox(w,"gh_ch_text","Text Enabled (Name)",1)local bQ=gui.Slider(w,"gh_max_distance","Max Distance",3000,0,5000)local bR=gui.Checkbox(w,"gh_fix_strafe","Affect Autostrafe",1)local bS=gui.Checkbox(w,"gh_fix_airstrafe","Affect Airstrafe",1)local bT=gui.Slider(w,"gh_box_radius","GH Box Size",20,0,50)local bU=gui.Checkbox(w,"gh_ch_keybinds","Enable Keybinds",0)local bV=gui.Keybox(w,"gh_kb_add","Add Throw",0)local bW=gui.Keybox(w,"gh_kb_rem","Remove Throw",0)local bX=gui.ColorPicker(bL,"gh_clr_throw","Grenade Helper Throw Point",255,0,0,255)local bY=gui.ColorPicker(bM,"gh_clr_helper","Grenade Helper Line Color",233,212,96,255)local bZ=gui.ColorPicker(bN,"gh_clr_standbox","Grenade Helper Location",0,230,64,255)local b_=gui.ColorPicker(bO,"gh_clr_standbox_oop","Grenade Helper Location (Out)",22,160,133,255)local c0=gui.ColorPicker(bP,"gh_clr_text","Grenade Helper Text Color",255,255,255,255)local c1={}local c2=false;local c3=false;local c4=true;local c5=true;local c6=globals.TickCount()local c7;local c8=1;local c9;local ca=globals.TickCount()local cb,cc=0,0;local c5=true;local cd={"auto","smokegrenade","flashbang","hegrenade","molotovgrenade","decoy"}local ce={"stand","jump","run","crouch","right","leftright","jumpcrouch","jumpleftright","jumpright","runjump"}local cf={"[GH] Welcome to GH Setup. Type 'cancel' at any time to cancel. Please enter the name of the throw (e.g. CT to B site):","[GH] Please enter the throw type (stand / jump / run / crouch / right / leftright / jumpcrouch / runjump / jumpleftright / jumpright):"}local cg=file.Open(bI,"a")cg:Close()local ch;function gameEventHandler(ci)if bJ:GetValue()==false then return end;local cj=ci:GetName()if cj=="player_say"and c7~=nil then local ck=client.GetLocalPlayerIndex()print(ck)local cl=ci:GetInt('userid')local cm=client.GetPlayerIndexByUserID(cl)print(cm)if ck~=cm then return end;ca=globals.TickCount()local cn=ci:GetString('text')if cn=="cancel"then c9="[GH] Throw cancelled"c7=nil;c8=0;return end;if string.sub(cn,1,4)=="[GH]"then return end;if c8==1 then c7.name=cn elseif c8==2 then if hasValue(ce,cn)==false then c9="[GH] The throw type '"..cn.."' is invalid, please enter one of the following values: stand / jump / run / crouch / right"return end;c7.type=cn;c9="[GH] Your throw '"..c7.name.."' - "..c7.type.." has been added."table.insert(c1[ch],c7)c7=nil;local co=convertTableToDataString(c1)local cp=file.Open(bI,"w")if cp~=nil then cp:Write(co)cp:Close()end;c8=0;return else c8=0;return end;c8=c8+1;c9=cf[c8]return end end;function doAdd(cq)local al=entities.GetLocalPlayer()if ch==nil or c1[ch]==nil or al==nil or not al:IsAlive()then return end;local cr=al:GetAbsOrigin()local bn=cq:GetViewAngles()local cs=getWeaponName(al)if cs~=nil and cs~="smokegrenade"and cs~="flashbang"and cs~="molotovgrenade"and cs~="hegrenade"and cs~="decoy"then return end;local ct={name="",type="not_set",nade=cs,pos={x=cr.x,y=cr.y,z=cr.z},ax=bn.x,ay=bn.y}c7=ct;c8=1;c9=cf[c8]end;function removeFirstThrow(cu)for aP,cv in ipairs(c1[ch])do if cv.name==cu.name and cv.pos.x==cu.pos.x and cv.pos.y==cu.pos.y and cv.pos.z==cu.pos.z then return table.remove(c1[ch],aP)end end end;function doDel(cu)if ch==nil or c1[ch]==nil then return end;removeFirstThrow(cu)local co=convertTableToDataString(c1)local cp=file.Open(bI,"w")if cp~=nil then cp:Write(co)cp:Close()end end;function moveEventHandler(cq)if bJ:GetValue()==false then return end;local al=entities.GetLocalPlayer()if ch==nil or c1==nil or c1[ch]==nil or al==nil or not al:IsAlive()then c7=nil;c8=1;c9=nil;return end;if c7~=nil then return end;local cw=bV:GetValue()local cx=bW:GetValue()if bU:GetValue()==false or cw==0 and cx==0 then return end;if c6~=nil and c6>globals.TickCount()then c6=globals.TickCount()end;if cw~=0 and input.IsButtonDown(cw)and globals.TickCount()-c6>bG then c6=globals.TickCount()return doAdd(cq)end;local cy,cz=getClosestThrow(c1[ch],al,cq)if cy==nil or cz>bT:GetValue()then return end;if cx~=0 and input.IsButtonDown(cx)and globals.TickCount()-c6>bG then c6=globals.TickCount()return doDel(cy)end end;function drawEventHandler()if bJ:GetValue()==false then return end;if c5 then loadData()c5=false end;cb,cc=draw.GetScreenSize()local cA=engine.GetMapName()if cA==nil or c1==nil then return end;if c1[cA]==nil then c1[cA]={}end;if ch~=cA then ch=cA end;if c1[ch]==nil then return end;if ca~=nil and ca>globals.TickCount()then ca=globals.TickCount()end;if c9~=nil and globals.TickCount()-ca>100 then client.ChatTeamSay(c9)c9=nil end;showNadeThrows()end;function loadData()local cp=file.Open(bI,"r")if cp==nil then return end;local cB=cp:Read()cp:Close()if cB~=nil and cB~=""then c1=parseStringifiedTable(cB)end end;function showNadeThrows()local al=entities:GetLocalPlayer()if al==nil then return end;local cr=al:GetAbsOrigin()local ao=getWeaponName(al)if ao~=nil and ao~="smokegrenade"and ao~="flashbang"and ao~="molotovgrenade"and ao~="hegrenade"and ao~="decoy"then if bR:GetValue()then gui.SetValue("misc.strafe.enable",1)end;if bS:GetValue()then gui.SetValue("misc.strafe.air",1)end;return end;local cC,cD=getActiveThrows(c1[ch],al,ao)if bR:GetValue()then gui.SetValue("misc.strafe.enable",1)end;if bS:GetValue()then gui.SetValue("misc.strafe.air",1)end;for aP=1,#cC do local cu=cC[aP]local cE=Vector3(cu.pos.x,cu.pos.y,cu.pos.z)local cF,cG=client.WorldToScreen(cE)if cD then if bR:GetValue()then gui.SetValue("misc.strafe.enable",0)end;if bS:GetValue()then gui.SetValue("misc.strafe.air",0)end;local cH=64;if cu.type=="crouch"then cH=46 end;local cI,cJ,cK=getThrowPosition(cu.pos.x,cu.pos.y,cu.pos.z,cu.ax,cu.ay,cH)local cL=Vector3(cI,cJ,cK)local cM,cN=client.WorldToScreen(cL)if cM~=nil and cN~=nil then if bL:GetValue()then draw.Color(bX:GetValue())local cO=bK:GetValue()draw.RoundedRect(cM-cO,cN-cO,cM+cO,cN+cO)end;if bM:GetValue()then draw.Color(bY:GetValue())draw.Line(cM,cN,cb/2,cc/2)end;if bP:GetValue()then draw.Color(c0:GetValue())local cP,cQ=draw.GetTextSize(cu.name)draw.Text(cM-cP/2,cN-30-cQ/2,cu.name)cP,cQ=draw.GetTextSize(cu.type)draw.Text(cM-cP/2,cN-20-cQ/2,cu.type)end end end;local cR=Vector3(cu.pos.x-bT:GetValue()/2,cu.pos.y-bT:GetValue()/2,cu.pos.z)local cS,cT=client.WorldToScreen(cR)local cU=Vector3(cu.pos.x-bT:GetValue()/2,cu.pos.y+bT:GetValue()/2,cu.pos.z)local cV,cW=client.WorldToScreen(cU)local cX=Vector3(cu.pos.x+bT:GetValue()/2,cu.pos.y-bT:GetValue()/2,cu.pos.z)local cY,cZ=client.WorldToScreen(cX)local c_=Vector3(cu.pos.x+bT:GetValue()/2,cu.pos.y+bT:GetValue()/2,cu.pos.z)local d0,d1=client.WorldToScreen(c_)if cF~=nil and cG~=nil and cS~=nil and cT~=nil and cV~=nil and cW~=nil and cY~=nil and cZ~=nil and d0~=nil and d1~=nil then if cu.distance<bQ:GetValue()then if cu.name~=nil then if bP:GetValue()then local cP,cQ=draw.GetTextSize(cu.name)draw.Color(c0:GetValue())draw.Text(cF-cP/2,cG-20-cQ/2,cu.name)end end;if cD then if bN:GetValue()then draw.Color(bZ:GetValue())else draw.Color(255,255,255,0)end else if bO:GetValue()then draw.Color(b_:GetValue())end end;draw.Line(cS,cT,cV,cW)draw.Line(cS,cT,cY,cZ)draw.Line(cS,cT,d0,d1)draw.Line(d0,d1,cV,cW)draw.Line(d0,d1,cY,cZ)draw.Line(cV,cW,cY,cZ)end end end end;function getThrowPosition(d2,d3,d4,d5,d6,cH)return d2-bF*math.cos(math.rad(d6+180)),d3-bF*math.sin(math.rad(d6+180)),d4-bF*math.tan(math.rad(d5))+cH end;function getWeaponName(al)if al~=nil then local an=al:GetPropEntity("m_hActiveWeapon")if an==nil then return nil end;local ao=an:GetClass()if ao~=nil then ao=ao:gsub("CWeapon","")ao=ao:lower()if ao:sub(1,1)=="c"then ao=ao:sub(2)end;if ao=="incendiarygrenade"then ao="molotovgrenade"end end;return ao end;return nil end;function getDistanceToTarget(d7,d8,d9,cI,cJ,cK)local az=d7-cI;local aA=d8-cJ;local da=d9-cK;return math.sqrt(az*az+aA*aA+da*da)end;function dump(db)if type(db)=='table'then local dc='{ 'for dd,cv in pairs(db)do if type(dd)~='number'then dd='"'..dd..'"'end;dc=dc..'['..dd..'] = '..dump(cv)..','end;return dc..'} 'else return tostring(db)end end;function getActiveThrows(de,al,df)local dg={}local dh={}for aP=1,#de do local cu=de[aP]if cu~=nil and cu.nade==df then local cr=al:GetAbsOrigin()local cz=getDistanceToTarget(cr.x,cr.y,cu.pos.z,cu.pos.x,cu.pos.y,cu.pos.z)cu.distance=cz;if cz<bT:GetValue()then table.insert(dh,cu)else table.insert(dg,cu)end end end;if#dh>0 then return dh,true end;return dg,false end;function getClosestThrow(de,al,cq)local cy;local di;local dj;local cr=al:GetAbsOrigin()for aP=1,#de do local cu=de[aP]local cz=getDistanceToTarget(cr.x,cr.y,cu.pos.z,cu.pos.x,cu.pos.y,cu.pos.z)local cH=64;if cu.type=="crouch"then cH=46 end;local d2,d3,d4=getThrowPosition(cu.pos.x,cu.pos.y,cu.pos.z,cu.ax,cu.ay,cH)local cL=Vector3(d2,d3,d4)local cM,cN=client.WorldToScreen(cL)local dk;if cM~=nil and cN~=nil then dk=math.abs(cb/2-cM+cc/2-cN)end;if di==nil or cz<=bT:GetValue()and(dj==nil or dj~=nil and dk~=nil and dk<dj)or dj==nil and cz<di then cy=cu;di=cz;dj=dk end end;return cy,di end;function parseStringifiedTable(dl)local dm={}local dn={}for aP in string.gmatch(dl,"([^\n]*)\n")do table.insert(dn,aP)end;for aP=1,#dn do local dp={}for dq in string.gmatch(dn[aP],"([^,]*)")do table.insert(dp,dq)end;local dr=dp[1]if dm[dr]==nil then dm[dr]={}end;table.insert(dm[dr],{name=dp[3],type=dp[5],nade=dp[7],pos={x=tonumber(dp[9]),y=tonumber(dp[11]),z=tonumber(dp[13])},ax=tonumber(dp[15]),ay=tonumber(dp[17])})end;return dm end;function convertTableToDataString(ds)local dt=""for dr,de in pairs(ds)do for aP,cu in ipairs(de)do if cu~=nil then dt=dt..dr..','..cu.name..','..cu.type..','..cu.nade..','..cu.pos.x..','..cu.pos.y..','..cu.pos.z..','..cu.ax..','..cu.ay..'\n'end end end;return dt end;function hasValue(du,dv)for dw,co in ipairs(du)do if co==dv then return true end end;return false end;local dx=false;local dy=140;local dz=10;local dA=1;local dB=1;local dC=1;local dD=50;local dE=0;local dF=0;function DesyncFlick()if F:GetValue()==5 then dC=dy;dD=dy+dz;if dE>dC then rotation3=rotation3*-1;if dE==dD then dE=0 end else if dF>1 then rotation3=rotation3;dF=0 end end;dE=dE+1;dF=dF+1 end end;function delaytimer(cq)if cq.tick_count%z:GetValue()==0 then fovrandomized=math.random(minValue,maxValue)end end;local function dG()rotationAmount=gui.GetValue("rbot.antiaim.base.rotation")lbyAmount=gui.GetValue("rbot.antiaim.base.lby")yawAmount=gui.GetValue("rbot.antiaim.base")fovAmount=gui.GetValue("rbot.aim.target.fov")end;local function dH()if input.IsButtonPressed(L:GetValue())then rotation=rotation*-1;rotation2=rotation2*-1;rotation3=rotation3*-1;lby=lby*-1;lby2=lby2*-1;rotationRANDOMIZED=rotationRANDOMIZED*-1;lbyRANDOMIZED=lbyRANDOMIZED*-1 end end;local function dI(cq)setFont(b)if cq.tick_count%G:GetValue()==0 then if F:GetValue()==4 then rotation2=rotation2*-1 end end end;local function dJ()if input.IsButtonPressed(C:GetValue())then toggle=not toggle end;if toggle then SetVal("rbot.hitscan.mode.shared.autowall",1)SetVal("rbot.hitscan.mode.pistol.autowall",1)SetVal("rbot.hitscan.mode.hpistol.autowall",1)SetVal("rbot.hitscan.mode.smg.autowall",1)SetVal("rbot.hitscan.mode.rifle.autowall",1)SetVal("rbot.hitscan.mode.shotgun.autowall",1)SetVal("rbot.hitscan.mode.scout.autowall",1)SetVal("rbot.hitscan.mode.asniper.autowall",1)SetVal("rbot.hitscan.mode.sniper.autowall",1)SetVal("rbot.hitscan.mode.lmg.autowall",1)else SetVal("rbot.hitscan.mode.shared.autowall",0)SetVal("rbot.hitscan.mode.pistol.autowall",0)SetVal("rbot.hitscan.mode.hpistol.autowall",0)SetVal("rbot.hitscan.mode.smg.autowall",0)SetVal("rbot.hitscan.mode.rifle.autowall",0)SetVal("rbot.hitscan.mode.shotgun.autowall",0)SetVal("rbot.hitscan.mode.scout.autowall",0)SetVal("rbot.hitscan.mode.asniper.autowall",0)SetVal("rbot.hitscan.mode.sniper.autowall",0)SetVal("rbot.hitscan.mode.lmg.autowall",0)end end;local function dK()if y:GetValue()then setFont(d)if input.IsButtonPressed(D:GetValue())then toggle2=not toggle2 end;if toggle2 then color(10,255,10)text(5,840,"OBV")SetVal("rbot.aim.key",key-1)SetVal("rbot.aim.target.fov",fovrandomized+3)SetVal("rbot.aim.target.silentaim",SilntAIM)else color(255,69,0)text(5,840,"OBV")SetVal("rbot.aim.key",key)SetVal("rbot.aim.target.fov",fovrandomized)SetVal("rbot.aim.target.silentaim",SilntAIM-1)end end end;local function dL()setFont(b)if y:GetValue()then color(124,176,34)text(5,920,"SEMIAIM")SetVal("rbot.aim.target.fov",fovrandomized)SetVal("rbot.accuracy.weapon.rifle.hitchance",60)SetVal("rbot.accuracy.weapon.rifle.mindmg",25)SetVal("rbot.accuracy.weapon.pistol.hitchance",55)SetVal("rbot.accuracy.weapon.pistol.mindmg",14)SetVal("rbot.accuracy.weapon.hpistol.hitchance",60)SetVal("rbot.accuracy.weapon.hpistol.mindmg",35)SetVal("rbot.accuracy.weapon.smg.hitchance",42)SetVal("rbot.accuracy.weapon.smg.mindmg",12)SetVal("rbot.accuracy.weapon.shotgun.hitchance",45)SetVal("rbot.accuracy.weapon.shotgun.mindmg",25)SetVal("rbot.accuracy.weapon.scout.hitchance",70)SetVal("rbot.accuracy.weapon.scout.mindmg",55)SetVal("rbot.accuracy.weapon.asniper.hitchance",60)SetVal("rbot.accuracy.weapon.asniper.mindmg",20)SetVal("rbot.accuracy.weapon.sniper.hitchance",85)SetVal("rbot.accuracy.weapon.sniper.mindmg",75)SetVal("rbot.accuracy.weapon.lmg.hitchance",35)SetVal("rbot.accuracy.weapon.lmg.mindmg",6)SetVal("rbot.aim.key",key)else color(255,25,25,255)text(5,920,"SEMIAIM")end end;local function dM()if ping>70 then SetVal("rbot.antiaim.base.rotation",0)SetVal("rbot.antiaim.base.lby",0)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign","Off")SetVal("rbot.antiaim.advanced.pitch","Off")SetVal("rbot.antiaim.base",0)elseif ping<70 then if F:GetValue()==0 then setFont(b)text(5,900,"OFF")SetVal("rbot.antiaim.base.rotation",0)SetVal("rbot.antiaim.base.lby",0)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign","Off")SetVal("rbot.antiaim.advanced.pitch","Off")SetVal("rbot.antiaim.base",0)elseif F:GetValue()==1 then setFont(b)text(5,900,"MINIMUM")SetVal("rbot.antiaim.base.rotation",rotation)SetVal("rbot.antiaim.base.lby",0)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign","Off")SetVal("rbot.antiaim.advanced.pitch","Off")SetVal("rbot.antiaim.base",0)elseif F:GetValue()==2 then setFont(b)text(5,900,"MAXIMUM")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotation)SetVal("rbot.antiaim.base.lby",lby)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",1)SetVal("rbot.antiaim.advanced.pitch","Off")elseif F:GetValue()==3 then setFont(b)text(5,900,"RANDOMIZED")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotationRANDOMIZED)SetVal("rbot.antiaim.base.lby",lbyRANDOMIZED)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",1)SetVal("rbot.antiaim.advanced.pitch","Off")elseif F:GetValue()==4 then setFont(b)text(5,900,"JITTER")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotation2)SetVal("rbot.antiaim.base.lby",lby2)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",0)SetVal("rbot.antiaim.advanced.pitch","Off")elseif F:GetValue()==5 then setFont(b)text(5,900,"ANTI-BRUTE")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotation3)SetVal("rbot.antiaim.base.lby",lby2)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",1)SetVal("rbot.antiaim.advanced.pitch","Off")end;if M:GetValue()then setFont(b)color(0,204,0)text(5,880,"FL")SetVal("misc.fakelag.enable",1)SetVal("misc.fakelag.factor",4.0)else color(255,0,0)text(5,880,"FL")SetVal("misc.fakelag.enable",0)end end end;local function dN()if y:GetValue()then setFont(d)if GetVal("rbot.hitscan.mode.shared.autowall")then color(124,176,34)text(5,860,"AWALL")else color(255,25,55)text(5,860,"AWALL")end end end;local function dO()if y:GetValue()then setFont(d)if input.IsButtonPressed(E:GetValue())then toggle3=not toggle3 end;if toggle3 then color(124,176,34)text(5,660,"RESOLVER")SetVal("rbot.accuracy.posadj.resolver",1)else color(255,10,10)text(5,660,"RESOLVER")SetVal("rbot.accuracy.posadj.resolver",0)end end end;local function dP()if N:GetValue()then setFont(e)if lbyAmount>1 then color(O:GetValue())text(890,530,"<")elseif lbyAmount<-1 then color(O:GetValue())text(1010,530,">")end end end;local function dQ()if P:GetValue()then color(Q:GetValue())text(948,548,"fov")text(970,548,fovAmount)end end;local function dR()text(5,540,ping)end;local function dS()if R:GetValue()==0 then setFont(e)color(255,255,255,255)text(5,5,"Icarus 1.0.8")elseif R:GetValue()==1 then color(255,255,255,255)draw.SetTexture(j)draw.FilledRect(-15,-15,220,220)end end;client.AllowListener("player_say")callbacks.Register("FireGameEvent","GH_EVENT",gameEventHandler)callbacks.Register("CreateMove","GH_MOVE",moveEventHandler)callbacks.Register("CreateMove",delaytimer)callbacks.Register("CreateMove",dI)callbacks.Register("Draw","GH_DRAW",drawEventHandler)callbacks.Register("Draw",dL)callbacks.Register("Draw",dM)callbacks.Register("Draw",dH)callbacks.Register("Draw",dJ)callbacks.Register("Draw",dN)callbacks.Register("Draw",dK)callbacks.Register("Draw",dO)callbacks.Register("Draw",dS)callbacks.Register("Draw",dG)callbacks.Register("Draw",dP)callbacks.Register("Draw",dQ)callbacks.Register("Draw",T)callbacks.Register("Draw",dR)callbacks.Register("Draw","DesyncFlick",DesyncFlick)


--- Auto updater
local function handleUpdates()

    if (update_available and not update_downloaded) then
        ICARUS_UPDATER_TEXT:SetText("Update is getting downloaded.")
        local new_version_content = http.Get(SCRIPT_FILE_ADDR);
        local old_script = file.Open(SCRIPT_FILE_NAME, "w");
        old_script:Write(new_version_content);
        old_script:Close();
        update_available = false;
        update_downloaded = true;
    end

    if (update_downloaded) then
        ICARUS_UPDATER_TEXT:SetText("Update available, please reload the script.")
        return;
    end

    if (not version_check_done) then
        version_check_done = true;
        local version = http.Get(VERSION_FILE_ADDR);
        if (version ~= VERSION_NUMBER) then
            update_available = true;
        end
    end
end


callbacks.Register("Draw", handleUpdates)