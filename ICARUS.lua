local SCRIPT_FILE_NAME = GetScriptName();
local SCRIPT_FILE_ADDR = "https://raw.githubusercontent.com/vpumav/ICARUS/master/ICARUS.lua";
local VERSION_FILE_ADDR = "https://raw.githubusercontent.com/vpumav/ICARUS/master/version.txt";
local VERSION_NUMBER = "1.0.8"; --- This too
local version_check_done = false;
local update_downloaded = false;
local update_available = false;

--- Auto Updater GUI Stuff
local ICARUS_UPDATER_TAB = gui.Tab(gui.Reference("Settings"), "icarus.updater.tab", "ICARUS™ Autoupdater")
local ICARUS_UPDATER_GROUP = gui.Groupbox(ICARUS_UPDATER_TAB, "Auto Updater for ICARUS™ | v" .. VERSION_NUMBER, 15, 15, 600, 600)
local ICARUS_UPDATER_TEXT = gui.Text(ICARUS_UPDATER_GROUP, "")
--- AUTO UPDATER END



local a=false;setFont=draw.SetFont;createFont=draw.CreateFont;getScreenSize=draw.GetScreenSize;getLocal=entities.GetLocalPlayer;color=draw.Color;text=draw.TextShadow;SetVal=gui.SetValue;GetVal=gui.GetValue;local b=createFont("Verdana",30,1500)local c=createFont("Arial",30,1500)local d=createFont("Segoe UI",30,1500)local e=createFont("Segoe UI",20,1500)local f=http.Get("https://i.ibb.co/2YKz5C7/Icarus-FERTIG.png")local g,h,i=common.DecodePNG(f)local j=draw.CreateTexture(g,h,i)local k=gui.Reference(ALEGIT)local l=gui.Groupbox(k,"Advanced Legit Bot",15,5,297,300)local m=gui.Groupbox(k,"Extra's",320,445,297,300)local n=gui.Checkbox(l,"lbot.sonar.enabled","Enable",false)local o=gui.Slider(l,"lbot.sonar.volume","Volume",50,1,100,1)local p=gui.Combobox(l,"lbot.sonar.enabled","Sound","Button 17","Button 15","Blip 1","Blip 2","Bell","Button 10")local q=gui.Slider(l,"lbot.sonar.distance","Distance",200,100,1500,10)local r=gui.Slider(l,"lbot.sonar.fov","FOV",180,1,180,1)local s=gui.Slider(l,"lbot.sonar.fov","FOV rotation",180,0,360,1)local t=gui.Checkbox(l,"lbot.sonar.distancebasedfreq","Distancebased Beep frequency",false)local u=gui.Checkbox(l,"lbot.sonar.distancebasedvol","Distancebased Beep frequency",false)local v=gui.Checkbox(l,"lbot.sonar.visualize","Visualize FOV",false)local w=gui.Groupbox(k,"Grenade Helper",15,600,297,300)local x=gui.Groupbox(k,"Semirage (WARNING: Ragebots Gets Enabled)",320,750,297,300)local y=gui.Checkbox(x,"semirage.aimbot","SEMI-AIM",false)local z=gui.Slider(x,"semirage.fovrndmtimer","Dynamic FOV Switch Time",1,1,60)local A=gui.Slider(x,"semirage.fovrndm1","Dynamic Minimum FOV",1,1,30)local B=gui.Slider(x,"semirage.fovrndm2","Dynamic Maximum FOV",1,1,30)local C=gui.Keybox(x,"semirage.autowall","Autowall key",72)local D=gui.Keybox(x,"semirage.obvious","Obvious Mode on Key",72)local E=gui.Keybox(x,"semirage.resolver","Toggle Resolver on key",72)local F=gui.Combobox(x,"semirage.legitAA.mode","Legit AA Modes","Off","Safe","Maximum","Randomized","Jitter","Anti-Brute")local G=gui.Slider(x,"semirage.legitAA.AntiBrute","Anti Brute Tick time",1,1,80)local H=gui.Slider(x,"semirage.legitAA.rndm1","rotation randomizer 1",1,1,58)local I=gui.Slider(x,"semirage.legitAA.rndm2","rotation randomizer 2",1,1,58)local J=gui.Slider(x,"semirage.legitAA.rndm3","lby randomizer 1",1,-58,1)local K=gui.Slider(x,"semirage.legitAA.rndm4","lby randomizer 2",1,-58,1)local L=gui.Keybox(x,"semirage.aa.inverter.key","Base Rotation Inverter",72)local M=gui.Checkbox(x,"semirage.fakelag","Fake LAG",false)local N=gui.Checkbox(x,"semirage.extra.desyncindicator","Desync Indicator",false)local O=gui.ColorPicker(x,"semirage.extra.desynccolor","Desync Indicator Color",255,255,255,255)local P=gui.Checkbox(x,"semirage.extra.fovindicator","FOV  Indicator",false)local Q=gui.ColorPicker(x,"semirage.extra.fovccator Color",255,255,255,255)local R=gui.Combobox(m,"icarus.showlogo","Icarus LOGO's","Simple","Normal")local S=gui.Checkbox(m,"icarus.pingindicator","Indicate the ping",false)local T=gui.Checkbox(m,"icarus.backtracklines","Backtrack lines",false)local U=gui.Checkbox(w,"gh_enabled","Grenade Helper Enabled",false)local V=gui.Slider(w,"gh_rect_size","Throw Rect Size",10,0,25)local W=gui.Checkbox(w,"gh_ch_throw","Throw Rectangle Enabled",1)local X=gui.Checkbox(w,"gh_ch_throwline","Throw Helper Line Enabled",1)local Y=gui.Checkbox(w,"gh_ch_standbox","Stand Box Enabled",1)local Z=gui.Checkbox(w,"gh_ch_standbox_ood","Stand Box Out of Distance Custom Color",1)local _=gui.Checkbox(w,"gh_ch_text","Text Enabled (Name)",1)local a0=gui.Slider(w,"gh_max_distance","Max Distance",3000,0,5000)local a1=gui.Checkbox(w,"gh_fix_strafe","Affect Autostrafe",1)local a2=gui.Checkbox(w,"gh_fix_airstrafe","Affect Airstrafe",1)local a3=gui.Slider(w,"gh_box_radius","GH Box Size",20,0,50)local a4=gui.Checkbox(w,"gh_ch_keybinds","Enable Keybinds",0)local a5=gui.Keybox(w,"gh_kb_add","Add Throw",0)local a6=gui.Keybox(w,"gh_kb_rem","Remove Throw",0)local a7=gui.ColorPicker(W,"gh_clr_throw","Grenade Helper Throw Point",255,0,0,255)local a8=gui.ColorPicker(X,"gh_clr_helper","Grenade Helper Line Color",233,212,96,255)local a9=gui.ColorPicker(Y,"gh_clr_standbox","Grenade Helper Location",0,230,64,255)local aa=gui.ColorPicker(Z,"gh_clr_standbox_oop","Grenade Helper Location (Out)",22,160,133,255)local ab=gui.ColorPicker(_,"gh_clr_text","Grenade Helper Text Color",255,255,255,255)local function ac()minValue=A:GetValue()maxValue=B:GetValue()legitaarandom1=H:GetValue()legitaarandom2=I:GetValue()legitaarandomlby1=J:GetValue()legitaarandomlby2=K:GetValue()rotationRANDOMIZED=math.random(legitaarandom1,legitaarandom2)lbyRANDOMIZED=math.random(legitaarandomlby1,legitaarandomlby2)ping=entities.GetPlayerResources():GetPropInt("m_iPing",client.GetLocalPlayerIndex())end;rotation=58;rotation2=56;rotation3=56;lby2=-60;lby=-60;key=1;SilntAIM=1;n:SetDescription("Enables Sonar ESP.")p:SetDescription("Select which sound should be played.")o:SetDescription("Master volume of the sound.")q:SetDescription("Distance of the FOV.")r:SetDescription("Field of view of the sonar.")s:SetDescription("Rotation of the FOV.")t:SetDescription("Play sound more frequently when enemies are near.")u:SetDescription("Play sound louder when enemies are near.")v:SetDescription("Visualize the FOV.")local ad=0;local ae={"button17","button15","blip1","blip2","bell1","button10"}local af=math.rad;local ag=math.cos;local ah=math.sin;local ai=math.sqrt;local aj=math.atan;local ak=client.WorldToScreen;local al=draw.Line;local am=gui.Groupbox(k,"Visual stuff",320,5,297,300)local an=gui.Checkbox(am,"crosshair.recoilcrosshair","Recoil Crosshair",1)local ao=gui.ColorPicker(an,"recoilcolor","Recoil Crosshair Color",255,255,255,255)local ap=gui.Checkbox(am,"crosshair.recoilidle","Hide Recoil Crosshair When Idle",1)ao:SetDescription("Pick the Color of the recoil Crosshair")an:SetDescription("Enables the recoil Crosshair")ap:SetDescription("Disables the recoil Crosshair if it's Idling")local aq=client.GetPlayerIndexByUserID;local ar=client.GetLocalPlayerIndex;local as;local at;local au=gui.Checkbox(m,'lua.quick.switch','Quick Switch AWP',0)local function av(aw)if au:GetValue()then if aw:GetName()~='weapon_fire'then return end;if gui.GetValue("misc.fakelatency.enable")then return end;local ax=ar()local ay=aw:GetInt('userid')if ax==aq(ay)then local az=aw:GetString('weapon')if az=='weapon_awp'then client.Command('slot3',true)flip=true end end end end;client.AllowListener('weapon_fire')callbacks.Register('FireGameEvent','on_weapon_fire',av)local function aA(aw)if aw:GetName()~='item_equip'then return end;local ax=ar()local ay=aw:GetInt('userid')local aB=aw:GetString('item')if ax==aq(ay)then at=aB end end;client.AllowListener('item_equip')callbacks.Register('FireGameEvent','on_item_equip',aA)function reset_tick(aC)if flip then if at~='awp'then client.Command("slot1",true)flip=false end end end;callbacks.Register('CreateMove','reset_tick',reset_tick)local function aD()local aE=0;local aF=entities.GetLocalPlayer()if aF~=nil and not gui.GetValue("rbot.master")then if aF:IsAlive()then local aG=aF:GetProp("m_bIsScoped")if aG==256 then aG=0 end;if aG==257 then aG=1 end;local aH=aF:GetPropEntity("m_hActiveWeapon")if aH~=nil then local aI=aH:GetClass()local aJ=0;local aK=0;aI=string.gsub(aI,"CWeapon","")if aI=="Aug"or aI=="SG556"then aE=1 else aE=0 end;if aG==0 or aG==1 and aE==1 then aJ=1 else aJ=0 end;if aI=="Taser"or aI=="CKnife"then aJ=0 end;if aI=="AWP"or aI=="SCAR20"or aI=="G3SG1"or aI=="SSG08"then aK=1 end;if an:GetValue()and aJ==1 then local aL=aF:GetPropVector("localdata","m_Local","m_aimPunchAngle")local aM,aN=aL.x,aL.y;local aO,aP=draw.GetScreenSize()local aQ=aO/2;local aR=aP/2;local aS=90;if aS==0 then aS=90 end;if aG==1 and aE==1 then aS=45 end;local aT=aO/aS;local aU=aP/aS;local aV=0;local aW=0;if gui.GetValue("esp.other.norecoil")then aV=aQ-aT*aN*1.2;aW=aR+aU*aM*2 else aV=aQ-aT*aN*0.6;aW=aR+aU*aM end;if aV>aQ-0.5 and aV<aQ then aV=aQ end;if aV<aQ+0.5 and aV>aQ then aV=aQ end;if aW>aR-0.5 and aW<aR then aW=aR end;if aW<aR+0.5 and aW>aR then aW=aR end;if ap:GetValue()then if aV==aQ and aW==aR and aK~=1 then return end end;draw.Color(ao:GetValue())draw.FilledRect(aV-3,aW-1,aV+3,aW+1)draw.FilledRect(aV-1,aW-3,aV+1,aW+3)end end end end end;callbacks.Register("Draw","punch",aD)local aX={}local aY=gui.Checkbox(m,"aspect_ratio_check","Aspect Ratio Changer",false)local aZ=gui.Slider(m,"aspect_ratio_reference","Force aspect ratio",100,1,199)local function a_(b0,b1)while b0~=0 do b0,b1=math.fmod(b1,b0),b0 end;return b1 end;local function b2(b3)local b4,b5=draw.GetScreenSize()local b6=b4*b3/b5;if b3==1 or not aY:GetValue()then b6=0 end;client.SetConVar("r_aspectratio",tonumber(b6),true)end;local function b7()local b4,b5=draw.GetScreenSize()for b8=1,200 do local b9=b8*0.01;b9=2-b9;local ba=a_(b4*b9,b5)if b4*b9/ba<100 or b9==1 then aX[b8]=b4*b9/ba..":"..b5/ba end end;local bb=aZ:GetValue()*0.01;bb=2-bb;b2(bb)end;callbacks.Register('Draw',"Aspect Ratio",b7)local bc=client.GetConVar("fov_cs_debug")local bd=client.GetConVar("viewmodel_fov")local be=gui.Slider(am,"view_fov","View",bc,0,120)local bf=gui.Slider(am,"view_model_fov","Viewmodel",bd,0,120)local bg=gui.Slider(am,"view_model_offset_x","Viewmodel X Offset",0,-10,10,0.1)local bh=gui.Slider(am,"view_model_offset_y","Viewmodel Y Offset",0,-10,10,0.1)local bi=gui.Slider(am,"view_model_offset_z","Viewmodel Z Offset",0,-10,10,0.1)local function bj()if be:GetValue()and bf:GetValue()and bg:GetValue()and bh:GetValue()and bi:GetValue()then client.SetConVar("fov_cs_debug",be:GetValue(),true)client.SetConVar("viewmodel_fov",bf:GetValue(),true)client.SetConVar("viewmodel_offset_x",bg:GetValue(),true)client.SetConVar("viewmodel_offset_y",bh:GetValue(),true)client.SetConVar("viewmodel_offset_z",bi:GetValue(),true)end end;callbacks.Register("Draw","Field of View",bj)local bk=gui.Checkbox(am,"crosshair.onsniper","Crosshair on Sniper",false)local function bl()if bk:GetValue()then local bm=1;local bn=entities.GetLocalPlayer()if bn==nil then return end;if bm==0 or bm==1 and bn:GetProp("m_bIsScoped")%1==0 or bm==2 and gui.GetValue("vis_scoperemover")==1 or bm==2 and gui.GetValue("vis_scoperemover")~=1 and bn:GetProp("m_bIsScoped")%2==0 then if client.GetConVar("weapon_debug_spread_show")~=3 then client.SetConVar("weapon_debug_spread_show",3,true)end else if client.GetConVar("weapon_debug_spread_show")~=0 then client.SetConVar("weapon_debug_spread_show",0,true)end end end end;callbacks.Register("Draw","force_crosshair_draw",bl)local function bo(bp,bq,color)local br,bs;draw.Color(color[1],color[2],color[3],color[4])local aS=r:GetValue()local bt=180-s:GetValue()local bu=engine.GetViewAngles()bu.y=bu.y+bt+180-aS;bu:Normalize()for rotation=bu.y,bu.y+aS*2,1 do local bv=af(rotation)local bw=Vector3(bq*ag(bv)+bp.x,bq*ah(bv)+bp.y,bp.z)local aQ,aR=ak(bw)if aS~=180 then if rotation==bu.y or rotation==bu.y+aS*2 then local bx,by=ak(bp)if aQ~=nil and bx~=nil then al(aQ,aR,bx,by)for b8=0,4 do al(aQ,aR+b8,bx,by+b8)end end end end;if aQ~=nil and br~=nil then al(aQ,aR,br,bs)for b8=0,4 do al(aQ,aR+b8,br,bs+b8)end end;br,bs=aQ,aR end end;local function bz(bA)return ai(bA.x*bA.x+bA.y*bA.y+bA.z*bA.z)end;local function bB(bC,bD)return Vector3(bC.x-bD.x,bC.y-bD.y,bC.z-bD.z)end;local function bE(bF,bG)local bH=EulerAngles(0,0,0)local bI=bB(bF,bG)local bJ=bz(bI)bH.x=aj(bI.z/bJ)*180.0/3.14159265358979323846;bH.y=aj(bI.y/bI.x)*180.0/3.14159265358979323846;bH.z=0.0;if bI.x>=0.0 then bH.y=bH.y+180.0 end;bH:Normalize()return bH end;local function bK()local bL=entities.GetLocalPlayer()if bL and bL:IsAlive()and n:GetValue()then local bM=bL:GetAbsOrigin()local bN=0;local bO=0;local bP=1;local bQ=9999;local aS=r:GetValue()local bt=s:GetValue()local bu=engine.GetViewAngles()local bR=q:GetValue()for b8=1,64,1 do local bS=entities.GetByIndex(b8)if bS and bS:IsAlive()then if bS:GetTeamNumber()~=bL:GetTeamNumber()then bO=bO+1;local bT=bS:GetAbsOrigin()local bU=bE(bM,bT)local bV=ai((bM.x-bT.x)^2+(bM.y-bT.y)^2)if bV<=bR then bU.y=bU.y-bu.y+bt;bU:Normalize()if bU.y<0 then if bU.y>=aS*-1 then bN=bN+1 end elseif bU.y>0 then if bU.y<=aS then bN=bN+1 end end;if bV<bQ then bQ=bV end end end end end;if t:GetValue()then bP=0.1+0.8*bQ/1500 end;if bN>0 and ad<globals.RealTime()-bP then local bW=ae[p:GetValue()+1]local bX=o:GetValue()/100;if u:GetValue()then bX=(1-bQ/1500)*bX end;client.Command("playvol buttons/"..bW.." "..bX,true)ad=globals.RealTime()end;if v:GetValue()then bo(bM,bR,{255*bN/bO,25,25,155})end end end;callbacks.Register("Draw",bK)local bY=100;local bZ=100;local b_=30;local c0=40;local c1="grenade_helper_data.dat"local c2={}local c3=false;local c4=false;local c5=true;local c6=true;local c7=globals.TickCount()local c8;local c9=1;local ca;local cb=globals.TickCount()local cc,cd=0,0;local c6=true;local ce={"auto","smokegrenade","flashbang","hegrenade","molotovgrenade","decoy"}local cf={"stand","jump","run","crouch","right","leftright","jumpcrouch","jumpleftright","jumpright","runjump"}local cg={"[GH] Welcome to GH Setup. Type 'cancel' at any time to cancel. Please enter the name of the throw (e.g. CT to B site):","[GH] Please enter the throw type (stand / jump / run / crouch / right / leftright / jumpcrouch / runjump / jumpleftright / jumpright):"}local ch=file.Open(c1,"a")ch:Close()local ci;function gameEventHandler(cj)if U:GetValue()==false then return end;local ck=cj:GetName()if ck=="player_say"and c8~=nil then local cl=client.GetLocalPlayerIndex()print(cl)local cm=cj:GetInt('userid')local cn=client.GetPlayerIndexByUserID(cm)print(cn)if cl~=cn then return end;cb=globals.TickCount()local co=cj:GetString('text')if co=="cancel"then ca="[GH] Throw cancelled"c8=nil;c9=0;return end;if string.sub(co,1,4)=="[GH]"then return end;if c9==1 then c8.name=co elseif c9==2 then if hasValue(cf,co)==false then ca="[GH] The throw type '"..co.."' is invalid, please enter one of the following values: stand / jump / run / crouch / right"return end;c8.type=co;ca="[GH] Your throw '"..c8.name.."' - "..c8.type.." has been added."table.insert(c2[ci],c8)c8=nil;local cp=convertTableToDataString(c2)local cq=file.Open(c1,"w")if cq~=nil then cq:Write(cp)cq:Close()end;c9=0;return else c9=0;return end;c9=c9+1;ca=cg[c9]return end end;function doAdd(cr)local aF=entities.GetLocalPlayer()if ci==nil or c2[ci]==nil or aF==nil or not aF:IsAlive()then return end;local cs=aF:GetAbsOrigin()local bH=cr:GetViewAngles()local ct=getWeaponName(aF)if ct~=nil and ct~="smokegrenade"and ct~="flashbang"and ct~="molotovgrenade"and ct~="hegrenade"and ct~="decoy"then return end;local cu={name="",type="not_set",nade=ct,pos={x=cs.x,y=cs.y,z=cs.z},ax=bH.x,ay=bH.y}c8=cu;c9=1;ca=cg[c9]end;function removeFirstThrow(cv)for b8,cw in ipairs(c2[ci])do if cw.name==cv.name and cw.pos.x==cv.pos.x and cw.pos.y==cv.pos.y and cw.pos.z==cv.pos.z then return table.remove(c2[ci],b8)end end end;function doDel(cv)if ci==nil or c2[ci]==nil then return end;removeFirstThrow(cv)local cp=convertTableToDataString(c2)local cq=file.Open(c1,"w")if cq~=nil then cq:Write(cp)cq:Close()end end;function moveEventHandler(cr)if U:GetValue()==false then return end;local aF=entities.GetLocalPlayer()if ci==nil or c2==nil or c2[ci]==nil or aF==nil or not aF:IsAlive()then c8=nil;c9=1;ca=nil;return end;if c8~=nil then return end;local cx=a5:GetValue()local cy=a6:GetValue()if a4:GetValue()==false or cx==0 and cy==0 then return end;if c7~=nil and c7>globals.TickCount()then c7=globals.TickCount()end;if cx~=0 and input.IsButtonDown(cx)and globals.TickCount()-c7>b_ then c7=globals.TickCount()return doAdd(cr)end;local cz,cA=getClosestThrow(c2[ci],aF,cr)if cz==nil or cA>a3:GetValue()then return end;if cy~=0 and input.IsButtonDown(cy)and globals.TickCount()-c7>b_ then c7=globals.TickCount()return doDel(cz)end end;function drawEventHandler()if U:GetValue()==false then return end;if c6 then loadData()c6=false end;cc,cd=draw.GetScreenSize()local cB=engine.GetMapName()if cB==nil or c2==nil then return end;if c2[cB]==nil then c2[cB]={}end;if ci~=cB then ci=cB end;if c2[ci]==nil then return end;if cb~=nil and cb>globals.TickCount()then cb=globals.TickCount()end;if ca~=nil and globals.TickCount()-cb>100 then client.ChatTeamSay(ca)ca=nil end;showNadeThrows()end;function loadData()local cq=file.Open(c1,"r")if cq==nil then return end;local cC=cq:Read()cq:Close()if cC~=nil and cC~=""then c2=parseStringifiedTable(cC)end end;function showNadeThrows()local aF=entities:GetLocalPlayer()if aF==nil then return end;local cs=aF:GetAbsOrigin()local aI=getWeaponName(aF)if aI~=nil and aI~="smokegrenade"and aI~="flashbang"and aI~="molotovgrenade"and aI~="hegrenade"and aI~="decoy"then if a1:GetValue()then gui.SetValue("misc.strafe.enable",1)end;if a2:GetValue()then gui.SetValue("misc.strafe.air",1)end;return end;local cD,cE=getActiveThrows(c2[ci],aF,aI)if a1:GetValue()then gui.SetValue("misc.strafe.enable",1)end;if a2:GetValue()then gui.SetValue("misc.strafe.air",1)end;for b8=1,#cD do local cv=cD[b8]local cF=Vector3(cv.pos.x,cv.pos.y,cv.pos.z)local cG,cH=client.WorldToScreen(cF)if cE then if a1:GetValue()then gui.SetValue("misc.strafe.enable",0)end;if a2:GetValue()then gui.SetValue("misc.strafe.air",0)end;local cI=64;if cv.type=="crouch"then cI=46 end;local cJ,cK,cL=getThrowPosition(cv.pos.x,cv.pos.y,cv.pos.z,cv.ax,cv.ay,cI)local cM=Vector3(cJ,cK,cL)local cN,cO=client.WorldToScreen(cM)if cN~=nil and cO~=nil then if W:GetValue()then draw.Color(a7:GetValue())local cP=V:GetValue()draw.RoundedRect(cN-cP,cO-cP,cN+cP,cO+cP)end;if X:GetValue()then draw.Color(a8:GetValue())draw.Line(cN,cO,cc/2,cd/2)end;if _:GetValue()then draw.Color(ab:GetValue())local cQ,cR=draw.GetTextSize(cv.name)draw.Text(cN-cQ/2,cO-30-cR/2,cv.name)cQ,cR=draw.GetTextSize(cv.type)draw.Text(cN-cQ/2,cO-20-cR/2,cv.type)end end end;local cS=Vector3(cv.pos.x-a3:GetValue()/2,cv.pos.y-a3:GetValue()/2,cv.pos.z)local cT,cU=client.WorldToScreen(cS)local cV=Vector3(cv.pos.x-a3:GetValue()/2,cv.pos.y+a3:GetValue()/2,cv.pos.z)local cW,cX=client.WorldToScreen(cV)local cY=Vector3(cv.pos.x+a3:GetValue()/2,cv.pos.y-a3:GetValue()/2,cv.pos.z)local cZ,c_=client.WorldToScreen(cY)local d0=Vector3(cv.pos.x+a3:GetValue()/2,cv.pos.y+a3:GetValue()/2,cv.pos.z)local d1,d2=client.WorldToScreen(d0)if cG~=nil and cH~=nil and cT~=nil and cU~=nil and cW~=nil and cX~=nil and cZ~=nil and c_~=nil and d1~=nil and d2~=nil then if cv.distance<a0:GetValue()then if cv.name~=nil then if _:GetValue()then local cQ,cR=draw.GetTextSize(cv.name)draw.Color(ab:GetValue())draw.Text(cG-cQ/2,cH-20-cR/2,cv.name)end end;if cE then if Y:GetValue()then draw.Color(a9:GetValue())else draw.Color(255,255,255,0)end else if Z:GetValue()then draw.Color(aa:GetValue())end end;draw.Line(cT,cU,cW,cX)draw.Line(cT,cU,cZ,c_)draw.Line(cT,cU,d1,d2)draw.Line(d1,d2,cW,cX)draw.Line(d1,d2,cZ,c_)draw.Line(cW,cX,cZ,c_)end end end end;function getThrowPosition(d3,d4,d5,d6,d7,cI)return d3-bZ*math.cos(math.rad(d7+180)),d4-bZ*math.sin(math.rad(d7+180)),d5-bZ*math.tan(math.rad(d6))+cI end;function getWeaponName(aF)if aF~=nil then local aH=aF:GetPropEntity("m_hActiveWeapon")if aH==nil then return nil end;local aI=aH:GetClass()if aI~=nil then aI=aI:gsub("CWeapon","")aI=aI:lower()if aI:sub(1,1)=="c"then aI=aI:sub(2)end;if aI=="incendiarygrenade"then aI="molotovgrenade"end end;return aI end;return nil end;function getDistanceToTarget(d8,d9,da,cJ,cK,cL)local aT=d8-cJ;local aU=d9-cK;local db=da-cL;return math.sqrt(aT*aT+aU*aU+db*db)end;function dump(dc)if type(dc)=='table'then local dd='{ 'for de,cw in pairs(dc)do if type(de)~='number'then de='"'..de..'"'end;dd=dd..'['..de..'] = '..dump(cw)..','end;return dd..'} 'else return tostring(dc)end end;function getActiveThrows(df,aF,dg)local dh={}local di={}for b8=1,#df do local cv=df[b8]if cv~=nil and cv.nade==dg then local cs=aF:GetAbsOrigin()local cA=getDistanceToTarget(cs.x,cs.y,cv.pos.z,cv.pos.x,cv.pos.y,cv.pos.z)cv.distance=cA;if cA<a3:GetValue()then table.insert(di,cv)else table.insert(dh,cv)end end end;if#di>0 then return di,true end;return dh,false end;function getClosestThrow(df,aF,cr)local cz;local dj;local dk;local cs=aF:GetAbsOrigin()for b8=1,#df do local cv=df[b8]local cA=getDistanceToTarget(cs.x,cs.y,cv.pos.z,cv.pos.x,cv.pos.y,cv.pos.z)local cI=64;if cv.type=="crouch"then cI=46 end;local d3,d4,d5=getThrowPosition(cv.pos.x,cv.pos.y,cv.pos.z,cv.ax,cv.ay,cI)local cM=Vector3(d3,d4,d5)local cN,cO=client.WorldToScreen(cM)local dl;if cN~=nil and cO~=nil then dl=math.abs(cc/2-cN+cd/2-cO)end;if dj==nil or cA<=a3:GetValue()and(dk==nil or dk~=nil and dl~=nil and dl<dk)or dk==nil and cA<dj then cz=cv;dj=cA;dk=dl end end;return cz,dj end;function parseStringifiedTable(dm)local dn={}local dp={}for b8 in string.gmatch(dm,"([^\n]*)\n")do table.insert(dp,b8)end;for b8=1,#dp do local dq={}for dr in string.gmatch(dp[b8],"([^,]*)")do table.insert(dq,dr)end;local ds=dq[1]if dn[ds]==nil then dn[ds]={}end;table.insert(dn[ds],{name=dq[3],type=dq[5],nade=dq[7],pos={x=tonumber(dq[9]),y=tonumber(dq[11]),z=tonumber(dq[13])},ax=tonumber(dq[15]),ay=tonumber(dq[17])})end;return dn end;function convertTableToDataString(dt)local du=""for ds,df in pairs(dt)do for b8,cv in ipairs(df)do if cv~=nil then du=du..ds..','..cv.name..','..cv.type..','..cv.nade..','..cv.pos.x..','..cv.pos.y..','..cv.pos.z..','..cv.ax..','..cv.ay..'\n'end end end;return du end;function hasValue(dv,dw)for dx,cp in ipairs(dv)do if cp==dw then return true end end;return false end;local dy=false;local dz=140;local dA=10;local dB=1;local dC=1;local dD=1;local dE=50;local dF=0;local dG=0;function DesyncFlick()if F:GetValue()==5 then dD=dz;dE=dz+dA;if dF>dD then rotation3=rotation3*-1;if dF==dE then dF=0 end else if dG>1 then rotation3=rotation3;dG=0 end end;dF=dF+1;dG=dG+1 end end;function delaytimer(cr)if cr.tick_count%z:GetValue()==0 then fovrandomized=math.random(minValue,maxValue)end end;local function dH()rotationAmount=gui.GetValue("rbot.antiaim.base.rotation")lbyAmount=gui.GetValue("rbot.antiaim.base.lby")yawAmount=gui.GetValue("rbot.antiaim.base")fovAmount=gui.GetValue("rbot.aim.target.fov")end;local function dI()if input.IsButtonPressed(L:GetValue())then rotation=rotation*-1;rotation2=rotation2*-1;rotation3=rotation3*-1;lby=lby*-1;lby2=lby2*-1;rotationRANDOMIZED=rotationRANDOMIZED*-1;lbyRANDOMIZED=lbyRANDOMIZED*-1 end end;local function dJ(cr)setFont(b)if cr.tick_count%G:GetValue()==0 then if F:GetValue()==4 then rotation2=rotation2*-1 end end end;local function dK()if input.IsButtonPressed(C:GetValue())then toggle=not toggle end;if toggle then SetVal("rbot.hitscan.mode.shared.autowall",1)SetVal("rbot.hitscan.mode.pistol.autowall",1)SetVal("rbot.hitscan.mode.hpistol.autowall",1)SetVal("rbot.hitscan.mode.smg.autowall",1)SetVal("rbot.hitscan.mode.rifle.autowall",1)SetVal("rbot.hitscan.mode.shotgun.autowall",1)SetVal("rbot.hitscan.mode.scout.autowall",1)SetVal("rbot.hitscan.mode.asniper.autowall",1)SetVal("rbot.hitscan.mode.sniper.autowall",1)SetVal("rbot.hitscan.mode.lmg.autowall",1)else SetVal("rbot.hitscan.mode.shared.autowall",0)SetVal("rbot.hitscan.mode.pistol.autowall",0)SetVal("rbot.hitscan.mode.hpistol.autowall",0)SetVal("rbot.hitscan.mode.smg.autowall",0)SetVal("rbot.hitscan.mode.rifle.autowall",0)SetVal("rbot.hitscan.mode.shotgun.autowall",0)SetVal("rbot.hitscan.mode.scout.autowall",0)SetVal("rbot.hitscan.mode.asniper.autowall",0)SetVal("rbot.hitscan.mode.sniper.autowall",0)SetVal("rbot.hitscan.mode.lmg.autowall",0)end end;local function dL()if y:GetValue()then setFont(d)if input.IsButtonPressed(D:GetValue())then toggle2=not toggle2 end;if toggle2 then color(10,255,10)text(5,840,"OBV")SetVal("rbot.aim.key",key-1)SetVal("rbot.aim.target.fov",fovrandomized+3)SetVal("rbot.aim.target.silentaim",SilntAIM)else color(255,69,0)text(5,840,"OBV")SetVal("rbot.aim.key",key)SetVal("rbot.aim.target.fov",fovrandomized)SetVal("rbot.aim.target.silentaim",SilntAIM-1)end end end;local function dM()setFont(b)if y:GetValue()then color(124,176,34)text(5,920,"SEMIAIM")SetVal("rbot.aim.target.fov",fovrandomized)SetVal("rbot.accuracy.weapon.rifle.hitchance",60)SetVal("rbot.accuracy.weapon.rifle.mindmg",25)SetVal("rbot.accuracy.weapon.pistol.hitchance",55)SetVal("rbot.accuracy.weapon.pistol.mindmg",14)SetVal("rbot.accuracy.weapon.hpistol.hitchance",60)SetVal("rbot.accuracy.weapon.hpistol.mindmg",35)SetVal("rbot.accuracy.weapon.smg.hitchance",42)SetVal("rbot.accuracy.weapon.smg.mindmg",12)SetVal("rbot.accuracy.weapon.shotgun.hitchance",45)SetVal("rbot.accuracy.weapon.shotgun.mindmg",25)SetVal("rbot.accuracy.weapon.scout.hitchance",70)SetVal("rbot.accuracy.weapon.scout.mindmg",55)SetVal("rbot.accuracy.weapon.asniper.hitchance",60)SetVal("rbot.accuracy.weapon.asniper.mindmg",20)SetVal("rbot.accuracy.weapon.sniper.hitchance",85)SetVal("rbot.accuracy.weapon.sniper.mindmg",75)SetVal("rbot.accuracy.weapon.lmg.hitchance",35)SetVal("rbot.accuracy.weapon.lmg.mindmg",6)SetVal("rbot.aim.key",key)else color(255,25,25,255)text(5,920,"SEMIAIM")end end;local function dN()if ping>70 then SetVal("rbot.antiaim.base.rotation",0)SetVal("rbot.antiaim.base.lby",0)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign","Off")SetVal("rbot.antiaim.advanced.pitch","Off")SetVal("rbot.antiaim.base",0)elseif ping<70 then if F:GetValue()==0 then setFont(b)text(5,900,"OFF")SetVal("rbot.antiaim.base.rotation",0)SetVal("rbot.antiaim.base.lby",0)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign","Off")SetVal("rbot.antiaim.advanced.pitch","Off")SetVal("rbot.antiaim.base",0)elseif F:GetValue()==1 then setFont(b)text(5,900,"MINIMUM")SetVal("rbot.antiaim.base.rotation",rotation)SetVal("rbot.antiaim.base.lby",0)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign","Off")SetVal("rbot.antiaim.advanced.pitch","Off")SetVal("rbot.antiaim.base",0)elseif F:GetValue()==2 then setFont(b)text(5,900,"MAXIMUM")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotation)SetVal("rbot.antiaim.base.lby",lby)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",1)SetVal("rbot.antiaim.advanced.pitch","Off")elseif F:GetValue()==3 then setFont(b)text(5,900,"RANDOMIZED")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotationRANDOMIZED)SetVal("rbot.antiaim.base.lby",lbyRANDOMIZED)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",1)SetVal("rbot.antiaim.advanced.pitch","Off")elseif F:GetValue()==4 then setFont(b)text(5,900,"JITTER")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotation2)SetVal("rbot.antiaim.base.lby",lby2)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",0)SetVal("rbot.antiaim.advanced.pitch","Off")elseif F:GetValue()==5 then setFont(b)text(5,900,"ANTI-BRUTE")SetVal("rbot.antiaim.base",0)SetVal("rbot.antiaim.base.rotation",rotation3)SetVal("rbot.antiaim.base.lby",lby2)SetVal("rbot.antiaim.advanced.autodir","Off")SetVal("rbot.antiaim.advanced.antialign",0)SetVal("rbot.antiaim.advanced.pitch","Off")end;if M:GetValue()then setFont(b)color(0,204,0)text(5,880,"FL")SetVal("misc.fakelag.enable",1)SetVal("misc.fakelag.factor",4.0)else color(255,0,0)text(5,880,"FL")SetVal("misc.fakelag.enable",0)end end end;local function dO()if y:GetValue()then setFont(d)if GetVal("rbot.hitscan.mode.shared.autowall")then color(124,176,34)text(5,860,"AWALL")else color(255,25,55)text(5,860,"AWALL")end end end;local function dP()if y:GetValue()then setFont(d)if input.IsButtonPressed(E:GetValue())then toggle3=not toggle3 end;if toggle3 then color(124,176,34)text(5,660,"RESOLVER")SetVal("rbot.accuracy.posadj.resolver",1)else color(255,10,10)text(5,660,"RESOLVER")SetVal("rbot.accuracy.posadj.resolver",0)end end end;local function dQ()if N:GetValue()then setFont(e)if lbyAmount>1 then color(O:GetValue())text(890,530,"<")elseif lbyAmount<-1 then color(O:GetValue())text(1010,530,">")end end end;local function dR()if P:GetValue()then color(Q:GetValue())text(948,548,"fov")text(970,548,fovAmount)end end;local function dS()text(5,540,ping)end;local function dT()if R:GetValue()==0 then setFont(e)color(255,255,255,255)text(5,5,"Icarus 1.0.8")elseif R:GetValue()==1 then color(255,255,255,255)draw.SetTexture(j)draw.FilledRect(-15,-15,220,220)end end;EssentialsNP={}EssentialsNP.Vector3={}EssentialsNP.Drawing={}local function dU(dV,dW)return{dV[1]+dW[1],dV[2]+dW[2],dV[3]+dW[3]}end;local function dX(dV,dW)return{dV[1]-dW[1],dV[2]-dW[2],dV[3]-dW[3]}end;local function dY(dV,dW)local dZ=dX(dV,dW)return math.sqrt(dZ[1]^2+dZ[2]^2+dZ[3]^2)end;local function d_(dV,dW)local dZ=dX(dV,dW)local e0=dY(dV,dW)local e1=math.asin(dZ[3]/e0)*-(180/math.pi)local e2=math.atan(dZ[2]/dZ[1])*180/math.pi;if dZ[1]<=0 then e2=e2+180 end;return{e1,e2}end;local function e3(dV)local e4=math.floor(math.sin(dV*3)*127+128)local e5=math.floor(math.sin(dV*3+2)*127+128)local e6=math.floor(math.sin(dV*3+4)*127+128)return{e4,e5,e6}end;EssentialsNP.Vector3.Add=dU;EssentialsNP.Vector3.Subtract=dX;EssentialsNP.Vector3.Hypotenuse=dY;EssentialsNP.Vector3.GetAngles=d_;EssentialsNP.Drawing.Hue=e3;local e7={100,100,100,255}local e8=false;local e9=1;local function ea()if T:GetValue()then local Legitbot=true else local Legitbot=false end end;local eb={}local ec={nil,nil}local function ed(ee)if ee:GetName()=="round_start"or ee:GetName()=="round_prestart"then eb={}end end;local function ef()LocalPlayer=entities.GetLocalPlayer()for dx,eg in pairs(entities.FindByClass("CCSPlayer"))do local eh=false;local ei=0;if T:GetValue()and gui.GetValue("rbot.master")then eh=true end;if eh then if gui.GetValue("misc.master")and gui.GetValue("misc.fakelatency.enable")then ei=gui.GetValue("misc.fakelatency.amount")end;if eg:GetIndex()~=LocalPlayer:GetIndex()and(LocalPlayer:GetTeamNumber()~=eg:GetTeamNumber()or FriendlyFire)and eg:IsAlive()then lastTick={nil,nil}if eb[eg:GetIndex()]==nil then eb[eg:GetIndex()]={}end;table.insert(eb[eg:GetIndex()],{{eg:GetHitboxPosition("HITGROUP_HEAD")},globals.RealTime()})for ej,ek in pairs(eb[eg:GetIndex()])do if ek[2]+0.2+ei<globals.RealTime()then table.remove(eb[eg:GetIndex()],ej)else local el=false;local em,en=client.WorldToScreen(ek[1][1],ek[1][2],ek[1][3])local eo={LocalPlayer:GetHitboxPosition("HITGROUP_HEAD")}if Legitbot==false then if engine.TraceLine(ek[1][1],ek[1][2],ek[1][3],eo[1],eo[2],eo[3],1)==1 then el=true end end;if em~=nil and en~=nil and not el then local ep={}if ek[2]-0.2<=globals.RealTime()-ei then if RainbowTrail then ep=EssentialsNP.Drawing.Hue(ek[2])ep[4]=255 else ep={gui.GetValue("esp.chams.backtrack.occluded.clr")}end else ep=e7 end;draw.Color(ep[1],ep[2],ep[3],ep[4])if e9>=1 then draw.FilledRect(em-e9,en-e9,em+e9,en+e9)else if lastTick[1]~=nil and lastTick[2]~=nil then draw.Line(em,en,lastTick[1],lastTick[2])end;lastTick={em,en}end end end end end end end end;function GUIHandler()if y:GetValue()then z:SetInvisible(false)D:SetInvisible(false)F:SetInvisible(false)H:SetInvisible(false)I:SetInvisible(false)J:SetInvisible(false)K:SetInvisible(false)A:SetInvisible(false)B:SetInvisible(false)L:SetInvisible(false)M:SetInvisible(false)N:SetInvisible(false)O:SetInvisible(false)P:SetInvisible(false)Q:SetInvisible(false)E:SetInvisible(false)C:SetInvisible(false)G:SetInvisible(false)else z:SetInvisible(true)D:SetInvisible(true)F:SetInvisible(true)H:SetInvisible(true)I:SetInvisible(true)J:SetInvisible(true)K:SetInvisible(true)A:SetInvisible(true)B:SetInvisible(true)L:SetInvisible(true)M:SetInvisible(true)N:SetInvisible(true)O:SetInvisible(true)P:SetInvisible(true)Q:SetInvisible(true)E:SetInvisible(true)C:SetInvisible(true)G:SetInvisible(true)end;if U:GetValue()then V:SetInvisible(false)W:SetInvisible(false)X:SetInvisible(false)Y:SetInvisible(false)Z:SetInvisible(false)_:SetInvisible(false)a4:SetInvisible(false)a0:SetInvisible(false)a1:SetInvisible(false)a2:SetInvisible(false)a3:SetInvisible(false)a5:SetInvisible(false)a6:SetInvisible(false)a8:SetInvisible(false)a9:SetInvisible(false)aa:SetInvisible(false)ab:SetInvisible(false)a7:SetInvisible(false)else V:SetInvisible(true)W:SetInvisible(true)X:SetInvisible(true)Y:SetInvisible(true)Z:SetInvisible(true)_:SetInvisible(true)a4:SetInvisible(true)a0:SetInvisible(true)a1:SetInvisible(true)a2:SetInvisible(true)a3:SetInvisible(true)a5:SetInvisible(true)a6:SetInvisible(true)a8:SetInvisible(true)a9:SetInvisible(true)aa:SetInvisible(true)ab:SetInvisible(true)a7:SetInvisible(true)end;if n:GetValue()then w:SetPosY(600)o:SetInvisible(false)p:SetInvisible(false)q:SetInvisible(false)r:SetInvisible(false)s:SetInvisible(false)t:SetInvisible(false)u:SetInvisible(false)v:SetInvisible(false)else w:SetPosY(120)o:SetInvisible(true)p:SetInvisible(true)q:SetInvisible(true)r:SetInvisible(true)s:SetInvisible(true)t:SetInvisible(true)u:SetInvisible(true)v:SetInvisible(true)end end;client.AllowListener("round_start")client.AllowListener("round_prestart")callbacks.Register("Draw","backtrackable_line_draw",ef)callbacks.Register("FireGameEvent","backtrackable_line_event",ed)client.AllowListener("player_say")callbacks.Register("FireGameEvent","GH_EVENT",gameEventHandler)callbacks.Register("CreateMove","GH_MOVE",moveEventHandler)callbacks.Register("CreateMove",delaytimer)callbacks.Register("CreateMove",dJ)callbacks.Register("Draw","GH_DRAW",drawEventHandler)callbacks.Register("Draw",dM)callbacks.Register("Draw",dN)callbacks.Register("Draw",dI)callbacks.Register("Draw",dK)callbacks.Register("Draw",dO)callbacks.Register("Draw",dL)callbacks.Register("Draw",dP)callbacks.Register("Draw",dT)callbacks.Register("Draw",dH)callbacks.Register("Draw",dQ)callbacks.Register("Draw",dR)callbacks.Register("Draw",ac)callbacks.Register("Draw",dS)callbacks.Register("Draw","DesyncFlick",DesyncFlick)callbacks.Register("Draw",ea)callbacks.Register("Draw",GUIHandler)


--- Auto updater
local function handleUpdates()

    if (update_available and not update_downloaded) then
        ICARUS_UPDATER_TEXT:SetText("Update is getting downloaded.")
        local new_version_content = http.Get(SCRIPT_FILE_ADDR);
        local old_script = file.Open(SCRIPT_FILE_NAME, "w");
        old_script:Write(new_version_content);
        old_script:Close();
        update_available = false;
        update_downloaded = true;
    end

    if (update_downloaded) then
        ICARUS_UPDATER_TEXT:SetText("Update available, please reload the script.")
        return;
    end

    if (not version_check_done) then
        version_check_done = true;
        local version = http.Get(VERSION_FILE_ADDR);
        if (version ~= VERSION_NUMBER) then
            update_available = true;
        end
    end
end


callbacks.Register("Draw", handleUpdates)